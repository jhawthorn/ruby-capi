<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ruby: include/ruby/internal/memory.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ruby<span id="projectnumber">&#160;3.2.0dev (2022-06-11 revision 0e2c01bd094617f5c82759bdab03bb786ce89d56)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_82434f6a8a39055b35115fc8d4134985.html">ruby</a></li><li class="navelem"><a class="el" href="../../dir_d6751d5d626a7ea074f9888503e0de14.html">internal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">memory.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<h3 class="version">(a5baf8d6bc4c21259705f9b4f9aa2d9b9d7ab936)</h3>
<p>Memory management stuff.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ruby/internal/config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/ddc/alloc__size_8h_source.html">ruby/internal/attr/alloc_size.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/d5a/const_8h_source.html">ruby/internal/attr/const.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d06/constexpr_8h_source.html">ruby/internal/attr/constexpr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dc1/noalias_8h_source.html">ruby/internal/attr/noalias.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d80/nonnull_8h_source.html">ruby/internal/attr/nonnull.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d6f/noreturn_8h_source.html">ruby/internal/attr/noreturn.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/dbd/restrict_8h_source.html">ruby/internal/attr/restrict.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/db2/returns__nonnull_8h_source.html">ruby/internal/attr/returns_nonnull.h</a>&quot;</code><br />
<code>#include &quot;ruby/internal/cast.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de3/dllexport_8h_source.html">ruby/internal/dllexport.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/dcd/include_2ruby_2internal_2has_2builtin_8h_source.html">ruby/internal/has/builtin.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/df3/internal_2stdalign_8h_source.html">ruby/internal/stdalign.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d5e/stdbool_8h_source.html">ruby/internal/stdbool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/de3/xmalloc_8h_source.html">ruby/internal/xmalloc.h</a>&quot;</code><br />
<code>#include &quot;ruby/backward/2/limits.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/db0/backward_22_2long__long_8h_source.html">ruby/backward/2/long_long.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d32/backward_22_2assume_8h_source.html">ruby/backward/2/assume.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/db0/defines_8h_source.html">ruby/defines.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for memory.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d9a/memory_8h__incl.png" border="0" usemap="#ainclude_2ruby_2internal_2memory_8h" alt=""/></div>
<map name="ainclude_2ruby_2internal_2memory_8h" id="ainclude_2ruby_2internal_2memory_8h">
<area shape="rect" title="Memory management stuff." alt="" coords="1315,5,1469,47"/>
<area shape="rect" href="../../db/d16/config_8h_source.html" title=" " alt="" coords="2675,698,2834,725"/>
<area shape="rect" href="../../d8/ddc/alloc__size_8h.html" title="Defines RBIMPL_ATTR_ALLOC_SIZE." alt="" coords="2126,423,2258,464"/>
<area shape="rect" href="../../da/d5a/const_8h.html" title="Defines RBIMPL_ATTR_CONST." alt="" coords="403,423,535,464"/>
<area shape="rect" href="../../d1/d06/constexpr_8h.html" title="RBIMPL_ATTR_CONSTEXPR." alt="" coords="3691,512,3823,553"/>
<area shape="rect" href="../../d5/dc1/noalias_8h.html" title="Defines RBIMPL_ATTR_NOALIAS." alt="" coords="94,423,226,464"/>
<area shape="rect" href="../../de/d80/nonnull_8h.html" title="Defines RBIMPL_ATTR_NONNULL." alt="" coords="1222,244,1354,285"/>
<area shape="rect" href="../../de/d6f/noreturn_8h.html" title="Defines RBIMPL_ATTR_NORETURN." alt="" coords="1447,423,1579,464"/>
<area shape="rect" href="../../d8/dbd/restrict_8h.html" title="Defines RBIMPL_ATTR_RESTRICT." alt="" coords="982,423,1114,464"/>
<area shape="rect" href="../../d6/db2/returns__nonnull_8h.html" title="Defines RBIMPL_ATTR_RETURNS_NONNULL." alt="" coords="1655,423,1793,464"/>
<area shape="rect" href="../../dc/d2b/cast_8h_source.html" title=" " alt="" coords="291,609,437,635"/>
<area shape="rect" href="../../db/de3/dllexport_8h.html" title="Tweaking visibility of C variables/functions." alt="" coords="3248,430,3424,457"/>
<area shape="rect" href="../../d0/dcd/include_2ruby_2internal_2has_2builtin_8h.html" title="Defines RBIMPL_HAS_BUILTIN." alt="" coords="1006,609,1191,635"/>
<area shape="rect" href="../../d4/df3/internal_2stdalign_8h.html" title="Defines RBIMPL_ALIGNAS / RBIMPL_ALIGNOF." alt="" coords="3449,430,3618,457"/>
<area shape="rect" href="../../d9/d5e/stdbool_8h.html" title="C99 shim for &lt;stdbool.h&gt;" alt="" coords="3502,251,3669,278"/>
<area shape="rect" href="../../d8/de3/xmalloc_8h.html" title="Declares ruby_xmalloc()." alt="" coords="2735,341,2902,367"/>
<area shape="rect" href="../../d9/d86/limits_8h_source.html" title=" " alt="" coords="276,519,452,546"/>
<area shape="rect" href="../../d7/db0/backward_22_2long__long_8h.html" title="Defines old LONG_LONG." alt="" coords="461,601,619,643"/>
<area shape="rect" href="../../d1/d32/backward_22_2assume_8h.html" title="Defines ASSUME / RB_LIKELY / UNREACHABLE." alt="" coords="611,430,802,457"/>
<area shape="rect" href="../../d8/db0/defines_8h.html" title=" " alt="" coords="2799,95,2913,121"/>
<area shape="rect" title=" " alt="" coords="2701,787,2808,814"/>
<area shape="rect" href="../../dc/db4/compiler__since_8h.html" title="Defines RBIMPL_COMPILER_SINCE." alt="" coords="1103,780,1265,821"/>
<area shape="rect" href="../../df/dec/compiler__is_8h.html" title="Defines RBIMPL_COMPILER_IS." alt="" coords="2205,869,2395,896"/>
<area shape="rect" href="../../d2/d6e/apple_8h_source.html" title=" " alt="" coords="2211,1123,2373,1164"/>
<area shape="rect" href="../../de/dbb/clang_8h_source.html" title=" " alt="" coords="2211,1033,2373,1075"/>
<area shape="rect" href="../../d4/d99/gcc_8h_source.html" title=" " alt="" coords="1923,944,2085,985"/>
<area shape="rect" href="../../d5/d80/intel_8h_source.html" title=" " alt="" coords="2024,1033,2187,1075"/>
<area shape="rect" href="../../d4/dac/msvc_8h_source.html" title=" " alt="" coords="2160,944,2323,985"/>
<area shape="rect" href="../../da/d2d/sunpro_8h_source.html" title=" " alt="" coords="2448,944,2611,985"/>
<area shape="rect" href="../../d3/d7c/attribute_8h.html" title="Defines RBIMPL_HAS_ATTRIBUTE." alt="" coords="1729,519,1932,546"/>
<area shape="rect" href="../../d4/d58/declspec__attribute_8h.html" title="Defines RBIMPL_HAS_DECLSPEC_ATTRIBUTE." alt="" coords="1469,512,1657,553"/>
<area shape="rect" href="../../d2/d74/feature_8h.html" title="Defines RBIMPL_HAS_FEATURE." alt="" coords="2793,609,2986,635"/>
<area shape="rect" href="../../d8/d8d/cpp__attribute_8h.html" title="Defines RBIMPL_HAS_CPP_ATTRIBUTE." alt="" coords="2221,512,2379,553"/>
<area shape="rect" href="../../de/ddd/has_2warning_8h.html" title="Defines RBIMPL_HAS_WARNING." alt="" coords="421,698,619,725"/>
<area shape="rect" href="../../d4/d28/warning__push_8h.html" title="Defines RBIMPL_WARNING_PUSH." alt="" coords="670,691,829,732"/>
<area shape="rect" href="../../db/d81/nodiscard_8h.html" title="Defines RBIMPL_ATTR_NODISCARD." alt="" coords="2753,423,2885,464"/>
<area shape="rect" href="../../db/d01/noexcept_8h.html" title="Defines RBIMPL_ATTR_NOEXCEPT." alt="" coords="2803,512,2935,553"/>
<area shape="rect" href="../../d8/d12/c__attribute_8h.html" title="Defines RBIMPL_HAS_C_ATTRIBUTE." alt="" coords="2635,512,2776,553"/>
<area shape="rect" href="../../dc/d4a/internal_2assume_8h.html" title="Defines RBIMPL_ASSUME / RBIMPL_UNREACHABLE." alt="" coords="955,519,1123,546"/>
<area shape="rect" title=" " alt="" coords="2824,169,2888,196"/>
<area shape="rect" href="../../da/d6e/attributes_8h_source.html" title=" " alt="" coords="1744,169,1949,196"/>
<area shape="rect" href="../../d8/d77/bool_8h_source.html" title=" " alt="" coords="3448,169,3619,196"/>
<area shape="rect" href="../../df/d66/backward_22_2stdalign_8h.html" title="Defines RUBY_ALIGNAS / RUBY_ALIGNOF." alt="" coords="3165,251,3357,278"/>
<area shape="rect" href="../../d1/d2d/stdarg_8h.html" title="Defines old _." alt="" coords="2433,169,2615,196"/>
<area shape="rect" href="../../de/d53/dosish_8h.html" title="Support for so&#45;called dosish systems." alt="" coords="2640,169,2800,196"/>
<area shape="rect" href="../../d9/da8/include_2ruby_2missing_8h_source.html" title=" " alt="" coords="3064,341,3179,367"/>
<area shape="rect" href="../../dc/d79/cold_8h.html" title="Defines RBIMPL_ATTR_COLD." alt="" coords="1970,423,2102,464"/>
<area shape="rect" href="../../d4/dce/deprecated_8h.html" title="Defines RBIMPL_ATTR_DEPRECATED." alt="" coords="2438,423,2570,464"/>
<area shape="rect" href="../../d5/daf/include_2ruby_2internal_2attr_2error_8h.html" title="Defines RBIMPL_ATTR_ERROR." alt="" coords="1841,333,1973,375"/>
<area shape="rect" href="../../d3/d51/forceinline_8h.html" title="Defines RBIMPL_ATTR_FORCEINLINE." alt="" coords="826,423,958,464"/>
<area shape="rect" href="../../d0/d0a/format_8h.html" title="Defines RBIMPL_ATTR_FORMAT." alt="" coords="2282,423,2414,464"/>
<area shape="rect" href="../../da/dfe/maybe__unused_8h.html" title="Defines RBIMPL_ATTR_MAYBE_UNUSED." alt="" coords="2595,423,2728,464"/>
<area shape="rect" href="../../d2/d5b/noinline_8h.html" title="Defines RBIMPL_ATTR_NOINLINE." alt="" coords="1291,423,1423,464"/>
<area shape="rect" href="../../d6/d0a/pure_8h.html" title="Defines RBIMPL_ATTR_PURE." alt="" coords="1481,244,1613,285"/>
<area shape="rect" href="../../d6/d91/attr_2warning_8h.html" title="Defines RBIMPL_ATTR_WARNING." alt="" coords="1891,244,2023,285"/>
<area shape="rect" href="../../d8/d3b/extension_8h.html" title="Defines RBIMPL_HAS_EXTENSION." alt="" coords="2403,519,2610,546"/>
<area shape="rect" href="../../dc/da7/assert_8h.html" title=" " alt="" coords="1456,341,1563,367"/>
<area shape="rect" title=" " alt="" coords="3113,430,3173,457"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d57/memory_8h__dep__incl.png" border="0" usemap="#ainclude_2ruby_2internal_2memory_8hdep" alt=""/></div>
<map name="ainclude_2ruby_2internal_2memory_8hdep" id="ainclude_2ruby_2internal_2memory_8hdep">
<area shape="rect" title="Memory management stuff." alt="" coords="8866,5,9019,47"/>
<area shape="rect" href="../../de/de6/ruby_2ruby_8h.html" title=" " alt="" coords="8870,95,9015,121"/>
<area shape="rect" href="../../de/d6d/compar_8c_source.html" title=" " alt="" coords="12259,445,12335,471"/>
<area shape="rect" href="../../dd/d17/constant_8h_source.html" title=" " alt="" coords="3787,266,3874,293"/>
<area shape="rect" href="../../dd/d9e/internal_2variable_8h_source.html" title=" " alt="" coords="5628,355,5764,382"/>
<area shape="rect" href="../../dd/d2d/node_8c_source.html" title=" " alt="" coords="5953,445,6017,471"/>
<area shape="rect" href="../../db/d97/parse_8c_source.html" title=" " alt="" coords="10232,445,10299,471"/>
<area shape="rect" href="../../d6/d5a/transient__heap_8c_source.html" title=" " alt="" coords="1487,445,1611,471"/>
<area shape="rect" href="../../d3/d2c/debug__counter_8h_source.html" title=" " alt="" coords="3207,266,3334,293"/>
<area shape="rect" href="../../da/d2d/ractor_8c_source.html" title=" " alt="" coords="2404,445,2471,471"/>
<area shape="rect" href="../../de/d32/dir_8c_source.html" title=" " alt="" coords="14193,445,14239,471"/>
<area shape="rect" href="../../da/d0d/dmydln_8c_source.html" title=" " alt="" coords="15746,177,15825,203"/>
<area shape="rect" href="../../de/d46/enumerator_8c_source.html" title=" " alt="" coords="9825,445,9929,471"/>
<area shape="rect" href="../../dd/dd0/eval__intern_8h_source.html" title=" " alt="" coords="8066,355,8169,382"/>
<area shape="rect" href="../../d0/daa/gc_8h_source.html" title=" " alt="" coords="2021,355,2069,382"/>
<area shape="rect" href="../../da/d59/gems_2src_2debug_2ext_2debug_2debug_8c_source.html" title=" " alt="" coords="14916,259,15063,300"/>
<area shape="rect" href="../../d9/d39/iseq__collector_8c_source.html" title=" " alt="" coords="15849,169,16012,211"/>
<area shape="rect" href="../../d1/ddc/hrtime_8h_source.html" title=" " alt="" coords="7455,355,7531,382"/>
<area shape="rect" href="../../db/d0a/id__table_8h_source.html" title=" " alt="" coords="3871,177,3953,203"/>
<area shape="rect" href="../../df/d69/internal_2class_8h_source.html" title=" " alt="" coords="5369,266,5484,293"/>
<area shape="rect" href="../../d9/d2b/internal_2object_8h_source.html" title=" " alt="" coords="9007,355,9132,382"/>
<area shape="rect" href="../../d6/d10/marshal_8c_source.html" title=" " alt="" coords="11429,445,11510,471"/>
<area shape="rect" href="../../d5/df2/win32_8c_source.html" title=" " alt="" coords="14717,445,14827,471"/>
<area shape="rect" href="../../d2/dd0/ractor__core_8h_source.html" title=" " alt="" coords="1563,355,1667,382"/>
<area shape="rect" href="../../d9/d3f/ruby_8h_source.html" title=" " alt="" coords="15839,266,15950,293"/>
<area shape="rect" href="../../db/da0/include_2ruby_2encoding_8h.html" title="Encoding relates APIs." alt="" coords="12631,177,12806,203"/>
<area shape="rect" href="../../d4/d15/internal_2io_8h_source.html" title=" " alt="" coords="12705,355,12804,382"/>
<area shape="rect" href="../../d4/d0f/internal_2encoding_8h_source.html" title=" " alt="" coords="12487,355,12631,382"/>
<area shape="rect" href="../../d3/da2/internal_2error_8h_source.html" title=" " alt="" coords="10151,355,10268,382"/>
<area shape="rect" href="../../d9/d84/win32_2file_8c_source.html" title=" " alt="" coords="15159,445,15252,471"/>
<area shape="rect" href="../../d0/dac/internal_2file_8h_source.html" title=" " alt="" coords="13729,355,13836,382"/>
<area shape="rect" href="../../d2/d38/internal_2string_8h_source.html" title=" " alt="" coords="9515,266,9637,293"/>
<area shape="rect" href="../../d8/d4e/strftime_8c_source.html" title=" " alt="" coords="11532,355,11615,382"/>
<area shape="rect" href="../../d4/db9/internal_2symbol_8h_source.html" title=" " alt="" coords="8345,355,8476,382"/>
<area shape="rect" href="../../dc/d45/internal_2transcode_8h_source.html" title=" " alt="" coords="12191,266,12339,293"/>
<area shape="rect" href="../../dd/d61/miniinit_8c_source.html" title=" " alt="" coords="15087,266,15164,293"/>
<area shape="rect" href="../../d2/dd8/scheduler_8h.html" title="Scheduler APIs." alt="" coords="4775,348,4910,389"/>
<area shape="rect" href="../../d5/d08/buffer_8h.html" title=" " alt="" coords="16037,177,16206,203"/>
<area shape="rect" href="../../d4/da0/include_2ruby_2random_8h.html" title=" " alt="" coords="16231,177,16396,203"/>
<area shape="rect" href="../../db/dde/internal_8h_source.html" title=" " alt="" coords="8749,177,8832,203"/>
<area shape="rect" href="../../d8/d32/vm__core_8h_source.html" title=" " alt="" coords="4591,266,4678,293"/>
<area shape="rect" href="../../d2/d0b/version_8c_source.html" title=" " alt="" coords="4673,355,4751,382"/>
<area shape="rect" href="../../df/d7d/internal_2array_8h_source.html" title=" " alt="" coords="9133,177,9251,203"/>
<area shape="rect" href="../../d3/d22/imemo_8h_source.html" title=" " alt="" coords="10343,266,10473,293"/>
<area shape="rect" href="../../dd/d84/internal_2process_8h_source.html" title=" " alt="" coords="13031,355,13166,382"/>
<area shape="rect" href="../../d3/d98/internal_2bignum_8h_source.html" title=" " alt="" coords="8251,177,8386,203"/>
<area shape="rect" href="../../d3/d26/internal_2numeric_8h_source.html" title=" " alt="" coords="8144,266,8283,293"/>
<area shape="rect" href="../../d8/d5f/internal_2rational_8h_source.html" title=" " alt="" coords="7297,355,7431,382"/>
<area shape="rect" href="../../df/db9/bits_8h_source.html" title=" " alt="" coords="6316,177,6425,203"/>
<area shape="rect" href="../../d4/d38/internal_2time_8h_source.html" title=" " alt="" coords="6221,266,6336,293"/>
<area shape="rect" href="../../d4/d03/compile_8h_source.html" title=" " alt="" coords="1251,355,1386,382"/>
<area shape="rect" href="../../d8/d8c/internal_2cont_8h_source.html" title=" " alt="" coords="2968,355,3083,382"/>
<area shape="rect" href="../../d5/dfa/internal_2dir_8h_source.html" title=" " alt="" coords="13860,355,13961,382"/>
<area shape="rect" href="../../df/d03/internal_2enum_8h_source.html" title=" " alt="" coords="6503,177,6625,203"/>
<area shape="rect" href="../../d3/d66/internal_2enumerator_8h_source.html" title=" " alt="" coords="9917,355,10075,382"/>
<area shape="rect" href="../../d3/d11/internal_2eval_8h_source.html" title=" " alt="" coords="5493,355,5603,382"/>
<area shape="rect" href="../../d5/d97/internal_2fixnum_8h_source.html" title=" " alt="" coords="8045,177,8176,203"/>
<area shape="rect" href="../../d9/dbe/internal_2gc_8h_source.html" title=" " alt="" coords="6717,177,6819,203"/>
<area shape="rect" href="../../d2/da3/internal_2struct_8h_source.html" title=" " alt="" coords="2144,355,2267,382"/>
<area shape="rect" href="../../d1/d28/internal_2hash_8h_source.html" title=" " alt="" coords="6397,355,6513,382"/>
<area shape="rect" href="../../dd/d9a/internal_2load_8h_source.html" title=" " alt="" coords="13490,355,13603,382"/>
<area shape="rect" href="../../df/db1/math_8h_source.html" title=" " alt="" coords="9665,266,9783,293"/>
<area shape="rect" href="../../d3/d1c/internal_2parse_8h_source.html" title=" " alt="" coords="13343,355,13465,382"/>
<area shape="rect" href="../../d3/d0b/internal_2proc_8h_source.html" title=" " alt="" coords="4027,355,4141,382"/>
<area shape="rect" href="../../d0/d9b/internal_2re_8h_source.html" title=" " alt="" coords="10597,355,10697,382"/>
<area shape="rect" href="../../d0/ddd/sanitizers_8h_source.html" title=" " alt="" coords="2798,355,2943,382"/>
<area shape="rect" href="../../d8/dfd/internal_2thread_8h_source.html" title=" " alt="" coords="5788,355,5916,382"/>
<area shape="rect" href="../../dc/d8f/internal_2vm_8h_source.html" title=" " alt="" coords="9377,177,9484,203"/>
<area shape="rect" href="../../d5/d74/loadpath_8c_source.html" title=" " alt="" coords="16421,177,16507,203"/>
<area shape="rect" href="../../d1/d9b/flock_8c_source.html" title=" " alt="" coords="16532,177,16644,203"/>
<area shape="rect" href="../../d6/d27/probes__helper_8h_source.html" title=" " alt="" coords="142,355,263,382"/>
<area shape="rect" href="../../da/d10/timev_8h_source.html" title=" " alt="" coords="6959,266,7025,293"/>
<area shape="rect" href="../../d1/daa/transcode__data_8h_source.html" title=" " alt="" coords="16668,177,16796,203"/>
<area shape="rect" href="../../d5/d8c/vm__debug_8h_source.html" title=" " alt="" coords="1715,266,1813,293"/>
<area shape="rect" href="../../d9/d0c/class_8c_source.html" title=" " alt="" coords="2629,445,2689,471"/>
<area shape="rect" href="../../d8/d16/gc_8c_source.html" title=" " alt="" coords="3865,445,3911,471"/>
<area shape="rect" href="../../d0/de1/object_8c_source.html" title=" " alt="" coords="8479,445,8550,471"/>
<area shape="rect" href="../../d0/d2a/variable_8c_source.html" title=" " alt="" coords="5313,445,5394,471"/>
<area shape="rect" href="../../d0/db2/vm__insnhelper_8c_source.html" title=" " alt="" coords="1744,445,1864,471"/>
<area shape="rect" href="../../d2/d47/compile_8c_source.html" title=" " alt="" coords="7337,445,7417,471"/>
<area shape="rect" href="../../db/dcc/error_8c_source.html" title=" " alt="" coords="9433,445,9495,471"/>
<area shape="rect" href="../../d3/d57/eval_8c_source.html" title=" " alt="" coords="6227,527,6283,553"/>
<area shape="rect" href="../../dd/d74/iseq_8c_source.html" title=" " alt="" coords="5426,445,5483,471"/>
<area shape="rect" href="../../d9/dd4/load_8c_source.html" title=" " alt="" coords="13427,445,13485,471"/>
<area shape="rect" href="../../d6/d27/numeric_8c_source.html" title=" " alt="" coords="9229,445,9312,471"/>
<area shape="rect" href="../../d0/d85/process_8c_source.html" title=" " alt="" coords="7454,445,7533,471"/>
<area shape="rect" href="../../dc/d26/re_8c_source.html" title=" " alt="" coords="11117,445,11163,471"/>
<area shape="rect" href="../../df/d77/ruby_8c_source.html" title=" " alt="" coords="12862,445,12922,471"/>
<area shape="rect" href="../../dd/dd7/vm__dump_8c_source.html" title=" " alt="" coords="1191,445,1284,471"/>
<area shape="rect" href="../../dc/d1f/yjit_8c_source.html" title=" " alt="" coords="1989,445,2040,471"/>
<area shape="rect" href="../../de/de9/vm_8c_source.html" title=" " alt="" coords="3000,527,3051,553"/>
<area shape="rect" href="../../dc/dcc/array_8c_source.html" title=" " alt="" coords="6730,445,6793,471"/>
<area shape="rect" href="../../d8/d70/debug__counter_8c_source.html" title=" " alt="" coords="3209,355,3333,382"/>
<area shape="rect" href="../../d1/d04/hash_8c_source.html" title=" " alt="" coords="6227,445,6288,471"/>
<area shape="rect" href="../../d8/d36/signal_8c_source.html" title=" " alt="" coords="2908,445,2975,471"/>
<area shape="rect" href="../../d1/db0/string_8c_source.html" title=" " alt="" coords="10853,445,10921,471"/>
<area shape="rect" href="../../d5/d64/vm__callinfo_8h_source.html" title=" " alt="" coords="1793,355,1895,382"/>
<area shape="rect" href="../../d9/d15/vm__sync_8h_source.html" title=" " alt="" coords="3409,355,3495,382"/>
<area shape="rect" href="../../d7/d5a/mjit__worker_8c_source.html" title=" " alt="" coords="1309,445,1411,471"/>
<area shape="rect" href="../../d5/db5/encoding_8c_source.html" title=" " alt="" coords="13185,445,13274,471"/>
<area shape="rect" href="../../de/d87/symbol_8c_source.html" title=" " alt="" coords="8575,445,8651,471"/>
<area shape="rect" href="../../d3/de7/thread_8c_source.html" title=" " alt="" coords="4937,445,5010,471"/>
<area shape="rect" href="../../df/d02/vm__sync_8c_source.html" title=" " alt="" coords="1635,445,1719,471"/>
<area shape="rect" href="../../d5/d75/cont_8c_source.html" title=" " alt="" coords="2165,445,2224,471"/>
<area shape="rect" href="../../d1/d72/debug_8c_source.html" title=" " alt="" coords="14096,445,14168,471"/>
<area shape="rect" href="../../d6/d9b/eval__jump_8c_source.html" title=" " alt="" coords="7845,445,7939,471"/>
<area shape="rect" href="../../d3/dda/proc_8c_source.html" title=" " alt="" coords="7040,445,7099,471"/>
<area shape="rect" href="../../d8/d73/vm__backtrace_8c_source.html" title=" " alt="" coords="11653,445,11769,471"/>
<area shape="rect" href="../../dc/d80/vm__trace_8c_source.html" title=" " alt="" coords="8163,445,8251,471"/>
<area shape="rect" href="../../db/dc3/id__table_8c_source.html" title=" " alt="" coords="6753,266,6833,293"/>
<area shape="rect" href="../../de/d63/vm__method_8c_source.html" title=" " alt="" coords="309,266,416,293"/>
<area shape="rect" href="../../d6/d13/file_8c_source.html" title=" " alt="" coords="13757,445,13808,471"/>
<area shape="rect" href="../../d9/d2d/sprintf_8c_source.html" title=" " alt="" coords="9336,445,9408,471"/>
<area shape="rect" href="../../d8/d01/ast_8c_source.html" title=" " alt="" coords="14383,445,14433,471"/>
<area shape="rect" href="../../dd/dcf/location_8h_source.html" title=" " alt="" coords="15995,348,16149,389"/>
<area shape="rect" href="../../d5/d36/parser_8h_source.html" title=" " alt="" coords="16224,348,16376,389"/>
<area shape="rect" href="../../d8/dc1/rbs__extension_8h_source.html" title=" " alt="" coords="16147,437,16338,479"/>
<area shape="rect" href="../../db/d64/ruby__objs_8h_source.html" title=" " alt="" coords="16400,348,16565,389"/>
<area shape="rect" href="../../d9/dfe/inits_8c_source.html" title=" " alt="" coords="16590,355,16647,382"/>
<area shape="rect" href="../../d0/d29/main_8c_source.html" title=" " alt="" coords="12095,355,12158,382"/>
<area shape="rect" href="../../d7/deb/acosh_8c_source.html" title=" " alt="" coords="15247,355,15366,382"/>
<area shape="rect" href="../../de/df2/ffs_8c_source.html" title=" " alt="" coords="15695,355,15793,382"/>
<area shape="rect" href="../../d7/d5b/setproctitle_8c_source.html" title=" " alt="" coords="15818,355,15971,382"/>
<area shape="rect" href="../../d4/d43/encindex_8h_source.html" title=" " alt="" coords="14087,355,14177,382"/>
<area shape="rect" href="../../d2/d9b/localeinit_8c_source.html" title=" " alt="" coords="14577,445,14663,471"/>
<area shape="rect" href="../../dd/d83/include_2ruby_2io_8h.html" title=" " alt="" coords="12668,266,12796,293"/>
<area shape="rect" href="../../d5/d82/enc_8h_source.html" title=" " alt="" coords="14809,355,14919,382"/>
<area shape="rect" href="../../df/d70/symbol_8h_source.html" title=" " alt="" coords="7759,355,7838,382"/>
</map>
</div>
</div>
<p><a href="../../dc/d18/memory_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d25/structrbimpl__size__mul__overflow__tag.html">rbimpl_size_mul_overflow_tag</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an implementation detail of rbimpl_size_mul_overflow().  <a href="../../dd/d25/structrbimpl__size__mul__overflow__tag.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a9dd28a544285c9a6b2eb6d1abadc45dd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a9dd28a544285c9a6b2eb6d1abadc45dd">RUBY_ALLOCV_LIMIT</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:a9dd28a544285c9a6b2eb6d1abadc45dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum possible number of bytes that <a class="el" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6" title="Identical to RB_ALLOCV_N(), except it implicitly assumes the type of array is VALUE.">RB_ALLOCV</a> can allocate using <code>alloca</code>.  <a href="../../dc/d18/memory_8h.html#a9dd28a544285c9a6b2eb6d1abadc45dd">More...</a><br /></td></tr>
<tr class="separator:a9dd28a544285c9a6b2eb6d1abadc45dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa2ce26d266baf56c9068a693d6073e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e">RB_GC_GUARD</a>(v)</td></tr>
<tr class="memdesc:a8aa2ce26d266baf56c9068a693d6073e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prevents premature destruction of local objects.  <a href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e">More...</a><br /></td></tr>
<tr class="separator:a8aa2ce26d266baf56c9068a693d6073e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0174425b708a881f776114ef4d1a470"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470">RB_ALLOC_N</a>(type,  n)&#160;&#160;&#160;RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3">ruby_xmalloc2</a>((n), sizeof(type)))</td></tr>
<tr class="memdesc:aa0174425b708a881f776114ef4d1a470"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenient macro that allocates an array of n elements.  <a href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470">More...</a><br /></td></tr>
<tr class="separator:aa0174425b708a881f776114ef4d1a470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5152faf5826149aa94dd260880bde05f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a5152faf5826149aa94dd260880bde05f">RB_ALLOC</a>(type)&#160;&#160;&#160;RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c">ruby_xmalloc</a>(sizeof(type)))</td></tr>
<tr class="memdesc:a5152faf5826149aa94dd260880bde05f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shorthand of <a class="el" href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470" title="Convenient macro that allocates an array of n elements.">RB_ALLOC_N</a> with <code>n=1</code>.  <a href="../../dc/d18/memory_8h.html#a5152faf5826149aa94dd260880bde05f">More...</a><br /></td></tr>
<tr class="separator:a5152faf5826149aa94dd260880bde05f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f680d1f7cbd85ea86ba61070cd8206a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a">RB_ZALLOC_N</a>(type,  n)&#160;&#160;&#160;RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0">ruby_xcalloc</a>((n), sizeof(type)))</td></tr>
<tr class="memdesc:a2f680d1f7cbd85ea86ba61070cd8206a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470" title="Convenient macro that allocates an array of n elements.">RB_ALLOC_N()</a> but also nullifies the allocated region before returning.  <a href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a">More...</a><br /></td></tr>
<tr class="separator:a2f680d1f7cbd85ea86ba61070cd8206a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97702d29b03e291bf200732b4a84494a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a97702d29b03e291bf200732b4a84494a">RB_ZALLOC</a>(type)&#160;&#160;&#160;(<a class="el" href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a">RB_ZALLOC_N</a>(type, 1))</td></tr>
<tr class="memdesc:a97702d29b03e291bf200732b4a84494a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shorthand of <a class="el" href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a" title="Identical to RB_ALLOC_N() but also nullifies the allocated region before returning.">RB_ZALLOC_N</a> with <code>n=1</code>.  <a href="../../dc/d18/memory_8h.html#a97702d29b03e291bf200732b4a84494a">More...</a><br /></td></tr>
<tr class="separator:a97702d29b03e291bf200732b4a84494a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adada016c349163035d66cb26faef9866"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#adada016c349163035d66cb26faef9866">RB_REALLOC_N</a>(var,  type,  n)&#160;&#160;&#160;    ((var) = RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd">ruby_xrealloc2</a>((void *)(var), (n), sizeof(type))))</td></tr>
<tr class="memdesc:adada016c349163035d66cb26faef9866"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenient macro that reallocates an array with a new size.  <a href="../../dc/d18/memory_8h.html#adada016c349163035d66cb26faef9866">More...</a><br /></td></tr>
<tr class="separator:adada016c349163035d66cb26faef9866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1408f4b967485afd869990b67e766ceb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a1408f4b967485afd869990b67e766ceb">ALLOCA_N</a>(type,  n)&#160;&#160;&#160;    RBIMPL_CAST((type *)alloca(rbimpl_size_mul_or_raise(sizeof(type), (n))))</td></tr>
<tr class="separator:a1408f4b967485afd869990b67e766ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ab49d8b42aea6693438bcaea30befc6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6">RB_ALLOCV</a>(v,  n)</td></tr>
<tr class="memdesc:a9ab49d8b42aea6693438bcaea30befc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f" title="Allocates a memory region, possibly on stack.">RB_ALLOCV_N()</a>, except it implicitly assumes the type of array is <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>.  <a href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6">More...</a><br /></td></tr>
<tr class="separator:a9ab49d8b42aea6693438bcaea30befc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48da74c4df0eef40b7e471aaa1e7265f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f">RB_ALLOCV_N</a>(type,  v,  n)</td></tr>
<tr class="memdesc:a48da74c4df0eef40b7e471aaa1e7265f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a memory region, possibly on stack.  <a href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f">More...</a><br /></td></tr>
<tr class="separator:a48da74c4df0eef40b7e471aaa1e7265f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9509052668c90c16bb5bfb2db47d20b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a9509052668c90c16bb5bfb2db47d20b0">RB_ALLOCV_END</a>(v)&#160;&#160;&#160;rb_free_tmp_buffer(&amp;(v))</td></tr>
<tr class="memdesc:a9509052668c90c16bb5bfb2db47d20b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Polite way to declare that the given array is not used any longer.  <a href="../../dc/d18/memory_8h.html#a9509052668c90c16bb5bfb2db47d20b0">More...</a><br /></td></tr>
<tr class="separator:a9509052668c90c16bb5bfb2db47d20b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56d620b94b668ed7665d1616b2c54e48"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a56d620b94b668ed7665d1616b2c54e48">MEMZERO</a>(p,  type,  n)&#160;&#160;&#160;memset((p), 0, rbimpl_size_mul_or_raise(sizeof(type), (n)))</td></tr>
<tr class="memdesc:a56d620b94b668ed7665d1616b2c54e48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handy macro to erase a region of memory.  <a href="../../dc/d18/memory_8h.html#a56d620b94b668ed7665d1616b2c54e48">More...</a><br /></td></tr>
<tr class="separator:a56d620b94b668ed7665d1616b2c54e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ab67335215e8362c63ed27ae2d1c40"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a04ab67335215e8362c63ed27ae2d1c40">MEMCPY</a>(p1,  p2,  type,  n)&#160;&#160;&#160;memcpy((p1), (p2), rbimpl_size_mul_or_raise(sizeof(type), (n)))</td></tr>
<tr class="memdesc:a04ab67335215e8362c63ed27ae2d1c40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handy macro to call memcpy.  <a href="../../dc/d18/memory_8h.html#a04ab67335215e8362c63ed27ae2d1c40">More...</a><br /></td></tr>
<tr class="separator:a04ab67335215e8362c63ed27ae2d1c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad09de334c9b8c7f717d314b14679e62"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#aad09de334c9b8c7f717d314b14679e62">MEMMOVE</a>(p1,  p2,  type,  n)&#160;&#160;&#160;memmove((p1), (p2), rbimpl_size_mul_or_raise(sizeof(type), (n)))</td></tr>
<tr class="memdesc:aad09de334c9b8c7f717d314b14679e62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handy macro to call memmove.  <a href="../../dc/d18/memory_8h.html#aad09de334c9b8c7f717d314b14679e62">More...</a><br /></td></tr>
<tr class="separator:aad09de334c9b8c7f717d314b14679e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f38632bba2bb73abb03716754f3230"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a42f38632bba2bb73abb03716754f3230">MEMCMP</a>(p1,  p2,  type,  n)&#160;&#160;&#160;memcmp((p1), (p2), rbimpl_size_mul_or_raise(sizeof(type), (n)))</td></tr>
<tr class="memdesc:a42f38632bba2bb73abb03716754f3230"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handy macro to call memcmp.  <a href="../../dc/d18/memory_8h.html#a42f38632bba2bb73abb03716754f3230">More...</a><br /></td></tr>
<tr class="separator:a42f38632bba2bb73abb03716754f3230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84cab8c1fdb7dbb9707b4e6e50f98a46"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga84cab8c1fdb7dbb9707b4e6e50f98a46">ALLOC_N</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470">RB_ALLOC_N</a></td></tr>
<tr class="memdesc:ga84cab8c1fdb7dbb9707b4e6e50f98a46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470">RB_ALLOC_N</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga84cab8c1fdb7dbb9707b4e6e50f98a46">More...</a><br /></td></tr>
<tr class="separator:ga84cab8c1fdb7dbb9707b4e6e50f98a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d44ee5d34e399ff293db2925d49f45b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga1d44ee5d34e399ff293db2925d49f45b">ALLOC</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#a5152faf5826149aa94dd260880bde05f">RB_ALLOC</a></td></tr>
<tr class="memdesc:ga1d44ee5d34e399ff293db2925d49f45b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#a5152faf5826149aa94dd260880bde05f">RB_ALLOC</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga1d44ee5d34e399ff293db2925d49f45b">More...</a><br /></td></tr>
<tr class="separator:ga1d44ee5d34e399ff293db2925d49f45b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76d668f1abc12b06cce5aa812ffe3272"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga76d668f1abc12b06cce5aa812ffe3272">ZALLOC_N</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a">RB_ZALLOC_N</a></td></tr>
<tr class="memdesc:ga76d668f1abc12b06cce5aa812ffe3272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a">RB_ZALLOC_N</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga76d668f1abc12b06cce5aa812ffe3272">More...</a><br /></td></tr>
<tr class="separator:ga76d668f1abc12b06cce5aa812ffe3272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5977753a684c6ecac43297762b2191f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga5977753a684c6ecac43297762b2191f3">ZALLOC</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#a97702d29b03e291bf200732b4a84494a">RB_ZALLOC</a></td></tr>
<tr class="memdesc:ga5977753a684c6ecac43297762b2191f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#a97702d29b03e291bf200732b4a84494a">RB_ZALLOC</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga5977753a684c6ecac43297762b2191f3">More...</a><br /></td></tr>
<tr class="separator:ga5977753a684c6ecac43297762b2191f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga131cf3c08712a1da7eb3e95fa0ce68f4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga131cf3c08712a1da7eb3e95fa0ce68f4">REALLOC_N</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#adada016c349163035d66cb26faef9866">RB_REALLOC_N</a></td></tr>
<tr class="memdesc:ga131cf3c08712a1da7eb3e95fa0ce68f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#adada016c349163035d66cb26faef9866">RB_REALLOC_N</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga131cf3c08712a1da7eb3e95fa0ce68f4">More...</a><br /></td></tr>
<tr class="separator:ga131cf3c08712a1da7eb3e95fa0ce68f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1712308e175c5501b8153e71d14b9709"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga1712308e175c5501b8153e71d14b9709">ALLOCV</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6">RB_ALLOCV</a></td></tr>
<tr class="memdesc:ga1712308e175c5501b8153e71d14b9709"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6">RB_ALLOCV</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga1712308e175c5501b8153e71d14b9709">More...</a><br /></td></tr>
<tr class="separator:ga1712308e175c5501b8153e71d14b9709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac386bc13233e78e797d06ef0ba17f0ca"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#gac386bc13233e78e797d06ef0ba17f0ca">ALLOCV_N</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f">RB_ALLOCV_N</a></td></tr>
<tr class="memdesc:gac386bc13233e78e797d06ef0ba17f0ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f">RB_ALLOCV_N</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#gac386bc13233e78e797d06ef0ba17f0ca">More...</a><br /></td></tr>
<tr class="separator:gac386bc13233e78e797d06ef0ba17f0ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf855fa62bc8e618e3fb5876fde1a6088"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#gaf855fa62bc8e618e3fb5876fde1a6088">ALLOCV_END</a>&#160;&#160;&#160;<a class="el" href="../../dc/d18/memory_8h.html#a9509052668c90c16bb5bfb2db47d20b0">RB_ALLOCV_END</a></td></tr>
<tr class="memdesc:gaf855fa62bc8e618e3fb5876fde1a6088"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../dc/d18/memory_8h.html#a9509052668c90c16bb5bfb2db47d20b0">RB_ALLOCV_END</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#gaf855fa62bc8e618e3fb5876fde1a6088">More...</a><br /></td></tr>
<tr class="separator:gaf855fa62bc8e618e3fb5876fde1a6088"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5bb057f288675b15a39d255040ecbdb1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a5bb057f288675b15a39d255040ecbdb1">rb_mul_size_overflow</a> (size_t a, size_t b, size_t max, size_t *c)</td></tr>
<tr class="separator:a5bb057f288675b15a39d255040ecbdb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e69043808389952f8117f2d85f79f97"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d18/memory_8h.html#a1e69043808389952f8117f2d85f79f97">rb_alloc_tmp_buffer2</a> (volatile <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113">VALUE</a> *store, long count, size_t elsize)</td></tr>
<tr class="memdesc:a1e69043808389952f8117f2d85f79f97"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an implementation detail of <a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f" title="Allocates a memory region, possibly on stack.">RB_ALLOCV_N()</a>.  <a href="../../dc/d18/memory_8h.html#a1e69043808389952f8117f2d85f79f97">More...</a><br /></td></tr>
<tr class="separator:a1e69043808389952f8117f2d85f79f97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Memory management stuff. </p>
<dl class="section author"><dt>Author</dt><dd>Ruby developers <a href="#" onclick="location.href='mai'+'lto:'+'rub'+'y-'+'cor'+'e@'+'rub'+'y-'+'lan'+'g.'+'org'; return false;">ruby-<span class="obfuscator">.nosp@m.</span>core<span class="obfuscator">.nosp@m.</span>@ruby<span class="obfuscator">.nosp@m.</span>-lan<span class="obfuscator">.nosp@m.</span>g.org</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This file is a part of the programming language Ruby. Permission is hereby granted, to either redistribute and/or modify this file, provided that the conditions mentioned in the file COPYING are met. Consult the file for details. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Symbols prefixed with either <code>RBIMPL</code> or <code>rbimpl</code> are implementation details. Don't take them as canon. They could rapidly appear then vanish. The name (path) of this header file is also an implementation detail. Do not expect it to persist at the place it is now. Developers are free to move it anywhere anytime at will. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>To ruby-core: remember that this header can be possibly recursively included from extension libraries written in C++. Do not expect for instance <code>__VA_ARGS__</code> is always available. We assume C99 for ruby itself but we don't assume languages of extension libraries. They could be written in C++98. </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a1408f4b967485afd869990b67e766ceb" name="a1408f4b967485afd869990b67e766ceb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1408f4b967485afd869990b67e766ceb">&#9670;&nbsp;</a></span>ALLOCA_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ALLOCA_N</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    RBIMPL_CAST((type *)alloca(rbimpl_size_mul_or_raise(sizeof(type), (n))))</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000251">Deprecated:</a></b></dt><dd>This macro is dangerous (does not bother stack overflow at all). <a class="el" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6" title="Identical to RB_ALLOCV_N(), except it implicitly assumes the type of array is VALUE.">RB_ALLOCV</a> is the modern way to do the same thing. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of array elements. </td></tr>
    <tr><td class="paramname">n</td><td>Length of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer on stack. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00286">286</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a42f38632bba2bb73abb03716754f3230" name="a42f38632bba2bb73abb03716754f3230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42f38632bba2bb73abb03716754f3230">&#9670;&nbsp;</a></span>MEMCMP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMCMP</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memcmp((p1), (p2), rbimpl_size_mul_or_raise(sizeof(type), (n)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handy macro to call memcmp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p1</td><td>Target LHS. </td></tr>
    <tr><td class="paramname">p2</td><td>Target RHS. </td></tr>
    <tr><td class="paramname">type</td><td>Type of <code>p1[0]</code> </td></tr>
    <tr><td class="paramname">n</td><td>Length of <code>p1</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;0</td><td><code>p1</code> is "less" than <code>p2</code>. </td></tr>
    <tr><td class="paramname">0</td><td><code>p1</code> is equal to <code>p2</code>. </td></tr>
    <tr><td class="paramname">&gt;0</td><td><code>p1</code> is "greater" than <code>p2</code>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00391">391</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a04ab67335215e8362c63ed27ae2d1c40" name="a04ab67335215e8362c63ed27ae2d1c40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04ab67335215e8362c63ed27ae2d1c40">&#9670;&nbsp;</a></span>MEMCPY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMCPY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memcpy((p1), (p2), rbimpl_size_mul_or_raise(sizeof(type), (n)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handy macro to call memcpy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p1</td><td>Destination pointer. </td></tr>
    <tr><td class="paramname">p2</td><td>Source pointer. </td></tr>
    <tr><td class="paramname">type</td><td>Type of <code>p2[0]</code> </td></tr>
    <tr><td class="paramname">n</td><td>Length of <code>p2</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>p1</code>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>First <code>n</code> elements of <code>p2</code> are copied into <code>p1</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00366">366</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="aad09de334c9b8c7f717d314b14679e62" name="aad09de334c9b8c7f717d314b14679e62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad09de334c9b8c7f717d314b14679e62">&#9670;&nbsp;</a></span>MEMMOVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMMOVE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p2, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memmove((p1), (p2), rbimpl_size_mul_or_raise(sizeof(type), (n)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handy macro to call memmove. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p1</td><td>Destination pointer. </td></tr>
    <tr><td class="paramname">p2</td><td>Source pointer. </td></tr>
    <tr><td class="paramname">type</td><td>Type of <code>p2[0]</code> </td></tr>
    <tr><td class="paramname">n</td><td>Length of <code>p2</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>p1</code>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>First <code>n</code> elements of <code>p2</code> are copied into <code>p1</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00378">378</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a56d620b94b668ed7665d1616b2c54e48" name="a56d620b94b668ed7665d1616b2c54e48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56d620b94b668ed7665d1616b2c54e48">&#9670;&nbsp;</a></span>MEMZERO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMZERO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;memset((p), 0, rbimpl_size_mul_or_raise(sizeof(type), (n)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handy macro to erase a region of memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>Target pointer. </td></tr>
    <tr><td class="paramname">type</td><td>Type of <code>p[0]</code> </td></tr>
    <tr><td class="paramname">n</td><td>Length of <code>p</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>p</code>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>First <code>n</code> elements of <code>p</code> are squashed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00354">354</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a5152faf5826149aa94dd260880bde05f" name="a5152faf5826149aa94dd260880bde05f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5152faf5826149aa94dd260880bde05f">&#9670;&nbsp;</a></span>RB_ALLOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_ALLOC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type</td><td>)</td>
          <td>&#160;&#160;&#160;RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c">ruby_xmalloc</a>(sizeof(type)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shorthand of <a class="el" href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470" title="Convenient macro that allocates an array of n elements.">RB_ALLOC_N</a> with <code>n=1</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of allocation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Storage instance that can hold an <code>type</code> object. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00207">207</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="aa0174425b708a881f776114ef4d1a470" name="aa0174425b708a881f776114ef4d1a470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0174425b708a881f776114ef4d1a470">&#9670;&nbsp;</a></span>RB_ALLOC_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_ALLOC_N</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3">ruby_xmalloc2</a>((n), sizeof(type)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convenient macro that allocates an array of n elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of array elements. </td></tr>
    <tr><td class="paramname">n</td><td>Length of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
    <tr><td class="paramname">rb_eArgError</td><td>Integer overflow trying to calculate the length of continuous memory region of <code>n</code> elements of <code>type</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Storage instance that is capable of storing at least <code>n</code> elements of type <code>type</code>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL, even when <code>n</code> is zero. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00193">193</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a9ab49d8b42aea6693438bcaea30befc6" name="a9ab49d8b42aea6693438bcaea30befc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ab49d8b42aea6693438bcaea30befc6">&#9670;&nbsp;</a></span>RB_ALLOCV</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_ALLOCV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    ((n) &lt; <a class="code hl_define" href="../../dc/d18/memory_8h.html#a9dd28a544285c9a6b2eb6d1abadc45dd">RUBY_ALLOCV_LIMIT</a> ? \</div>
<div class="line">     ((v) = 0, alloca(n)) :    \</div>
<div class="line">     rb_alloc_tmp_buffer(&amp;(v), (n)))</div>
<div class="ttc" id="amemory_8h_html_a9dd28a544285c9a6b2eb6d1abadc45dd"><div class="ttname"><a href="../../dc/d18/memory_8h.html#a9dd28a544285c9a6b2eb6d1abadc45dd">RUBY_ALLOCV_LIMIT</a></div><div class="ttdeci">#define RUBY_ALLOCV_LIMIT</div><div class="ttdoc">Maximum possible number of bytes that RB_ALLOCV can allocate using alloca.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d18/memory_8h_source.html#l00107">memory.h:107</a></div></div>
</div><!-- fragment -->
<p>Identical to <a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f" title="Allocates a memory region, possibly on stack.">RB_ALLOCV_N()</a>, except it implicitly assumes the type of array is <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>A variable to hold the just-in-case opaque Ruby object. </td></tr>
    <tr><td class="paramname">n</td><td>Size of allocation, in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An array of <code>n</code> bytes of <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><code>n</code> may be evaluated twice. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00298">298</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a9509052668c90c16bb5bfb2db47d20b0" name="a9509052668c90c16bb5bfb2db47d20b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9509052668c90c16bb5bfb2db47d20b0">&#9670;&nbsp;</a></span>RB_ALLOCV_END</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_ALLOCV_END</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td>&#160;&#160;&#160;rb_free_tmp_buffer(&amp;(v))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Polite way to declare that the given array is not used any longer. </p>
<p >Calling this not mandatory. Our GC can baby-sit you. However it is not a very bad idea to use it when possible. Doing so could reduce memory footprint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>A variable previously passed to either <a class="el" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6" title="Identical to RB_ALLOCV_N(), except it implicitly assumes the type of array is VALUE.">RB_ALLOCV</a>/<a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f" title="Allocates a memory region, possibly on stack.">RB_ALLOCV_N</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00343">343</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a48da74c4df0eef40b7e471aaa1e7265f" name="a48da74c4df0eef40b7e471aaa1e7265f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48da74c4df0eef40b7e471aaa1e7265f">&#9670;&nbsp;</a></span>RB_ALLOCV_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_ALLOCV_N</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    RBIMPL_CAST((<a class="code hl_typedef" href="../../d8/d72/namespaceruby_1_1backward_1_1cxxanyargs.html#a6271efe42b493d8b5f057f4c4bbf86c4">type</a> *)                                     \</div>
<div class="line">        (((<span class="keywordtype">size_t</span>)(n) &lt; <a class="code hl_define" href="../../dc/d18/memory_8h.html#a9dd28a544285c9a6b2eb6d1abadc45dd">RUBY_ALLOCV_LIMIT</a> / <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d8/d72/namespaceruby_1_1backward_1_1cxxanyargs.html#a6271efe42b493d8b5f057f4c4bbf86c4">type</a>)) ? \</div>
<div class="line">         ((v) = 0, alloca((n) * <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d8/d72/namespaceruby_1_1backward_1_1cxxanyargs.html#a6271efe42b493d8b5f057f4c4bbf86c4">type</a>))) :            \</div>
<div class="line">         <a class="code hl_function" href="../../dc/d18/memory_8h.html#a1e69043808389952f8117f2d85f79f97">rb_alloc_tmp_buffer2</a>(&amp;(v), (n), <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="../../d8/d72/namespaceruby_1_1backward_1_1cxxanyargs.html#a6271efe42b493d8b5f057f4c4bbf86c4">type</a>))))</div>
<div class="ttc" id="amemory_8h_html_a1e69043808389952f8117f2d85f79f97"><div class="ttname"><a href="../../dc/d18/memory_8h.html#a1e69043808389952f8117f2d85f79f97">rb_alloc_tmp_buffer2</a></div><div class="ttdeci">static void * rb_alloc_tmp_buffer2(volatile VALUE *store, long count, size_t elsize)</div><div class="ttdoc">This is an implementation detail of RB_ALLOCV_N().</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d18/memory_8h_source.html#l00640">memory.h:640</a></div></div>
<div class="ttc" id="anamespaceruby_1_1backward_1_1cxxanyargs_html_a6271efe42b493d8b5f057f4c4bbf86c4"><div class="ttname"><a href="../../d8/d72/namespaceruby_1_1backward_1_1cxxanyargs.html#a6271efe42b493d8b5f057f4c4bbf86c4">ruby::backward::cxxanyargs::type</a></div><div class="ttdeci">VALUE type(ANYARGS)</div><div class="ttdoc">ANYARGS-ed function type.</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6e/cxxanyargs_8hpp_source.html#l00056">cxxanyargs.hpp:56</a></div></div>
</div><!-- fragment -->
<p>Allocates a memory region, possibly on stack. </p>
<p >If the given size exceeds <a class="el" href="../../dc/d18/memory_8h.html#a9dd28a544285c9a6b2eb6d1abadc45dd" title="Maximum possible number of bytes that RB_ALLOCV can allocate using alloca.">RUBY_ALLOCV_LIMIT</a>, it allocates a dedicated opaque ruby object instead and let our GC sweep that region after use. Either way you can fire-and-forget.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"> </div>
<div class="line">VALUE</div>
<div class="line">foo(<span class="keywordtype">int</span> n)</div>
<div class="line">{</div>
<div class="line">    VALUE v;</div>
<div class="line">    <span class="keyword">auto</span> ptr = <a class="code hl_define" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6">RB_ALLOCV</a>(<span class="keyword">struct</span> <a class="code hl_struct" href="../../d8/d15/structtms.html">tms</a>, v, n);</div>
<div class="line">    ...</div>
<div class="line">    <span class="comment">// no need to free `ptr`.</span></div>
<div class="line">}</div>
<div class="ttc" id="amemory_8h_html_a9ab49d8b42aea6693438bcaea30befc6"><div class="ttname"><a href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6">RB_ALLOCV</a></div><div class="ttdeci">#define RB_ALLOCV(v, n)</div><div class="ttdoc">Identical to RB_ALLOCV_N(), except it implicitly assumes the type of array is VALUE.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d18/memory_8h_source.html#l00298">memory.h:298</a></div></div>
<div class="ttc" id="astructtms_html"><div class="ttname"><a href="../../d8/d15/structtms.html">tms</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db1/win32_8h_source.html#l00704">win32.h:704</a></div></div>
</div><!-- fragment --><p >If you want to be super-duper polite you can also explicitly state the end of use of such memory region by calling <a class="el" href="../../dc/d18/memory_8h.html#a9509052668c90c16bb5bfb2db47d20b0" title="Polite way to declare that the given array is not used any longer.">RB_ALLOCV_END()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The type of array elements. </td></tr>
    <tr><td class="paramname">v</td><td>A variable to hold the just-in-case opaque Ruby object. </td></tr>
    <tr><td class="paramname">n</td><td>Number of elements requested to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An array of <code>n</code> elements of <code>type</code>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd><code>n</code> may be evaluated twice. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00330">330</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a8aa2ce26d266baf56c9068a693d6073e" name="a8aa2ce26d266baf56c9068a693d6073e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aa2ce26d266baf56c9068a693d6073e">&#9670;&nbsp;</a></span>RB_GC_GUARD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_GC_GUARD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">v</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    (*__extension__ ({ \</div>
<div class="line">        volatile VALUE *rb_gc_guarded_ptr = &amp;(v); \</div>
<div class="line">        __asm__(<span class="stringliteral">&quot;&quot;</span> : : <span class="stringliteral">&quot;m&quot;</span>(rb_gc_guarded_ptr)); \</div>
<div class="line">        rb_gc_guarded_ptr; \</div>
<div class="line">    }))</div>
</div><!-- fragment -->
<p>Prevents premature destruction of local objects. </p>
<p >Ruby's garbage collector is conservative; it scans the C level machine stack as well. Possible in- use Ruby objects must remain visible on stack, to be properly marked as such. However contemporary C compilers do not interface well with this. Consider the following example:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> s = <a class="code hl_function" href="../../d8/d68/include_2ruby_2internal_2intern_2string_8h.html#ad8ce7851130e4b275cf8694f469493ee">rb_str_new_cstr</a>(<span class="stringliteral">&quot; world&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> sptr = <a class="code hl_function" href="../../d8/dcf/rstring_8h.html#af6263a4fce5f052ce8c3f24049b32516">RSTRING_PTR</a>(s);</div>
<div class="line"><span class="keyword">auto</span> t = <a class="code hl_function" href="../../d8/d68/include_2ruby_2internal_2intern_2string_8h.html#ad8ce7851130e4b275cf8694f469493ee">rb_str_new_cstr</a>(<span class="stringliteral">&quot;hello,&quot;</span>); <span class="comment">// Possible GC invocation</span></div>
<div class="line"><span class="keyword">auto</span> u = <a class="code hl_function" href="../../d8/d68/include_2ruby_2internal_2intern_2string_8h.html#af2e85db9052b600604e81b18903bf031">rb_str_cat_cstr</a>(t, sptr);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_define" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e">RB_GC_GUARD</a>(s); <span class="comment">// ensure `s` (and thus `sptr`) do not get GC-ed</span></div>
<div class="ttc" id="ainclude_2ruby_2internal_2intern_2string_8h_html_ad8ce7851130e4b275cf8694f469493ee"><div class="ttname"><a href="../../d8/d68/include_2ruby_2internal_2intern_2string_8h.html#ad8ce7851130e4b275cf8694f469493ee">rb_str_new_cstr</a></div><div class="ttdeci">VALUE rb_str_new_cstr(const char *ptr)</div><div class="ttdoc">Identical to rb_str_new(), except it assumes the passed pointer is a pointer to a C string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l00951">string.c:951</a></div></div>
<div class="ttc" id="ainclude_2ruby_2internal_2intern_2string_8h_html_af2e85db9052b600604e81b18903bf031"><div class="ttname"><a href="../../d8/d68/include_2ruby_2internal_2intern_2string_8h.html#af2e85db9052b600604e81b18903bf031">rb_str_cat_cstr</a></div><div class="ttdeci">VALUE rb_str_cat_cstr(VALUE dst, const char *src)</div><div class="ttdoc">Identical to rb_str_cat(), except it assumes the passed pointer is a pointer to a C string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/db0/string_8c_source.html#l03112">string.c:3112</a></div></div>
<div class="ttc" id="amemory_8h_html_a8aa2ce26d266baf56c9068a693d6073e"><div class="ttname"><a href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e">RB_GC_GUARD</a></div><div class="ttdeci">#define RB_GC_GUARD(v)</div><div class="ttdoc">Prevents premature destruction of local objects.</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d18/memory_8h_source.html#l00161">memory.h:161</a></div></div>
<div class="ttc" id="arstring_8h_html_af6263a4fce5f052ce8c3f24049b32516"><div class="ttname"><a href="../../d8/dcf/rstring_8h.html#af6263a4fce5f052ce8c3f24049b32516">RSTRING_PTR</a></div><div class="ttdeci">static char * RSTRING_PTR(VALUE str)</div><div class="ttdoc">Queries the contents pointer of the string.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcf/rstring_8h_source.html#l00498">rstring.h:498</a></div></div>
</div><!-- fragment --><p >Here, without the <a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a>, the last use of <code>s</code> is <em>before</em> the last use of <code>sptr</code>. Compilers could thus think <code>s</code> and <code>t</code> are allowed to overlap. That would eliminate <code>s</code> from the stack, while <code>sptr</code> is still in use. If our GC ran at that very moment, <code>s</code> gets swept out, which also destroys <code>sptr</code>. Boom! You got a SEGV.</p>
<p >In order to prevent this scenario <a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a> must be placed <em>after</em> the last use of <code>sptr</code>. Placing <a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a> before dereferencing <code>sptr</code> would be of no use.</p>
<p ><a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a> would not be necessary at all in the above example if non- inlined function calls are made on the <code>s</code> variable after <code>sptr</code> is dereferenced. Thus, in the above example, calling any un-inlined function on <code>s</code> such as <code>rb_str_modify(s);</code> will ensure <code>s</code> stays on the stack or register to prevent a GC invocation from prematurely freeing it.</p>
<p >Using the <a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a> macro is preferable to using the <code>volatile</code> keyword in C. <a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a> has the following advantages:</p>
<ul>
<li>the intent of the macro use is clear.</li>
<li><a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a> only affects its call site. OTOH <code>volatile</code> generates some extra code every time the variable is used, hurting optimisation.</li>
<li><code>volatile</code> implementations may be buggy/inconsistent in some compilers and architectures. <a class="el" href="../../dc/d18/memory_8h.html#a8aa2ce26d266baf56c9068a693d6073e" title="Prevents premature destruction of local objects.">RB_GC_GUARD</a> is customisable for broken systems/compilers without negatively affecting other systems.</li>
<li>C++ since C++20 deprecates <code>volatile</code>. If you write your extension library in that language there is no escape but to use this macro.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>A variable of <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a> type. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>v</code> is still alive. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00161">161</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="adada016c349163035d66cb26faef9866" name="adada016c349163035d66cb26faef9866"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adada016c349163035d66cb26faef9866">&#9670;&nbsp;</a></span>RB_REALLOC_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_REALLOC_N</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    ((var) = RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd">ruby_xrealloc2</a>((void *)(var), (n), sizeof(type))))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convenient macro that reallocates an array with a new size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>type</code>, which points to a storage instance that was previously returned from either<ul>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3" title="Identical to ruby_xmalloc(), except it allocates nelems * elemsiz bytes.">ruby_xmalloc2()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0" title="Identical to ruby_xmalloc2(), except it returns a zero-filled storage instance.">ruby_xcalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramname">type</td><td>Type of allocation. </td></tr>
    <tr><td class="paramname">n</td><td>Requested new size of each element. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
    <tr><td class="paramname">rb_eArgError</td><td>Integer overflow trying to calculate the length of continuous memory region of <code>n</code> elements of <code>type</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Storage instance that is capable of storing at least <code>n</code> elements of type <code>type</code>. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The passed variable must point to a valid live storage instance. It is a failure to pass a variable that holds an already-freed pointer. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL, even when <code>n</code> is zero. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not assume anything on the alignment of the return value. There is no guarantee that it inherits the passed argument's one. </dd>
<dd>
The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00276">276</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a97702d29b03e291bf200732b4a84494a" name="a97702d29b03e291bf200732b4a84494a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97702d29b03e291bf200732b4a84494a">&#9670;&nbsp;</a></span>RB_ZALLOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_ZALLOC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a">RB_ZALLOC_N</a>(type, 1))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shorthand of <a class="el" href="../../dc/d18/memory_8h.html#a2f680d1f7cbd85ea86ba61070cd8206a" title="Identical to RB_ALLOC_N() but also nullifies the allocated region before returning.">RB_ZALLOC_N</a> with <code>n=1</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of allocation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Storage instance that can hold an <code>type</code> object. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Returned object is filled with zeros. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00243">243</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a2f680d1f7cbd85ea86ba61070cd8206a" name="a2f680d1f7cbd85ea86ba61070cd8206a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f680d1f7cbd85ea86ba61070cd8206a">&#9670;&nbsp;</a></span>RB_ZALLOC_N</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RB_ZALLOC_N</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">type, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">n&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;RBIMPL_CAST((type *)<a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0">ruby_xcalloc</a>((n), sizeof(type)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dc/d18/memory_8h.html#aa0174425b708a881f776114ef4d1a470" title="Convenient macro that allocates an array of n elements.">RB_ALLOC_N()</a> but also nullifies the allocated region before returning. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type of array elements. </td></tr>
    <tr><td class="paramname">n</td><td>Length of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
    <tr><td class="paramname">rb_eArgError</td><td>Integer overflow trying to calculate the length of continuous memory region of <code>n</code> elements of <code>type</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Storage instance that is capable of storing at least <code>n</code> elements of type <code>type</code>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Returned array is filled with zeros. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL, even when <code>n</code> is zero. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00228">228</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a9dd28a544285c9a6b2eb6d1abadc45dd" name="a9dd28a544285c9a6b2eb6d1abadc45dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dd28a544285c9a6b2eb6d1abadc45dd">&#9670;&nbsp;</a></span>RUBY_ALLOCV_LIMIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ALLOCV_LIMIT&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum possible number of bytes that <a class="el" href="../../dc/d18/memory_8h.html#a9ab49d8b42aea6693438bcaea30befc6" title="Identical to RB_ALLOCV_N(), except it implicitly assumes the type of array is VALUE.">RB_ALLOCV</a> can allocate using <code>alloca</code>. </p>
<p >Anything beyond this is allocated using rb_alloc_tmp_buffer(). This selection is transparent to users. People don't have to bother. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00107">107</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1e69043808389952f8117f2d85f79f97" name="a1e69043808389952f8117f2d85f79f97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e69043808389952f8117f2d85f79f97">&#9670;&nbsp;</a></span>rb_alloc_tmp_buffer2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * rb_alloc_tmp_buffer2 </td>
          <td>(</td>
          <td class="paramtype">volatile <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113">VALUE</a> *&#160;</td>
          <td class="paramname"><em>store</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>elsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is an implementation detail of <a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f" title="Allocates a memory region, possibly on stack.">RB_ALLOCV_N()</a>. </p>
<p >People don't use this directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">store</td><td>Pointer to a variable. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>Number of elements in an array. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elsize</td><td>Size of each elements. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Region of <code>count</code> * <code>elsize</code> bytes. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>store</code> holds the corresponding tmp buffer object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00640">640</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
<a id="a5bb057f288675b15a39d255040ecbdb1" name="a5bb057f288675b15a39d255040ecbdb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bb057f288675b15a39d255040ecbdb1">&#9670;&nbsp;</a></span>rb_mul_size_overflow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int rb_mul_size_overflow </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000260">Deprecated:</a></b></dt><dd>This function was an implementation detail of old <a class="el" href="../../dc/d18/memory_8h.html#a48da74c4df0eef40b7e471aaa1e7265f" title="Allocates a memory region, possibly on stack.">RB_ALLOCV_N()</a>. We no longer use it. @shyouhei suspects that there are no actual usage now. However it was not marked as private before. We cannot delete it any longer. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>Arbitrary value. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>Arbitrary value. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max</td><td>Possible maximum value. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">c</td><td>A pointer to return the computation result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td><code>c</code> is insane. </td></tr>
    <tr><td class="paramname">0</td><td><code>c</code> is sane. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>c</code> holds <code>a</code> * <code>b</code>, but could be overflowed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d18/memory_8h_source.html#l00525">525</a> of file <a class="el" href="../../dc/d18/memory_8h_source.html">memory.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
