<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ruby: include/ruby/atomic.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ruby<span id="projectnumber">&#160;3.2.0dev (2022-06-11 revision 0e2c01bd094617f5c82759bdab03bb786ce89d56)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_82434f6a8a39055b35115fc8d4134985.html">ruby</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle"><div class="title">atomic.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<h3 class="version">(63297c2ca494661bdf5536a3c5d3a1c8d68d2d64)</h3>
<p>Atomic operations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ruby/internal/config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/da7/assert_8h_source.html">ruby/assert.h</a>&quot;</code><br />
<code>#include &quot;ruby/backward/2/limits.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d45/artificial_8h_source.html">ruby/internal/attr/artificial.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dc1/noalias_8h_source.html">ruby/internal/attr/noalias.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d80/nonnull_8h_source.html">ruby/internal/attr/nonnull.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db4/compiler__since_8h_source.html">ruby/internal/compiler_since.h</a>&quot;</code><br />
<code>#include &quot;ruby/internal/cast.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d3f/value_8h_source.html">ruby/internal/value.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d78/include_2ruby_2internal_2static__assert_8h_source.html">ruby/internal/static_assert.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d5e/stdbool_8h_source.html">ruby/internal/stdbool.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for atomic.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d32/atomic_8h__incl.png" border="0" usemap="#ainclude_2ruby_2atomic_8h" alt=""/></div>
<map name="ainclude_2ruby_2atomic_8h" id="ainclude_2ruby_2atomic_8h">
<area shape="rect" title="Atomic operations." alt="" coords="1133,5,1292,32"/>
<area shape="rect" href="../../db/d16/config_8h_source.html" title=" " alt="" coords="1310,579,1469,606"/>
<area shape="rect" href="../../dc/db4/compiler__since_8h.html" title="Defines RBIMPL_COMPILER_SINCE." alt="" coords="656,661,819,703"/>
<area shape="rect" href="../../dc/da7/assert_8h.html" title=" " alt="" coords="675,244,782,271"/>
<area shape="rect" href="../../dc/d2b/cast_8h_source.html" title=" " alt="" coords="665,490,810,517"/>
<area shape="rect" href="../../d9/d86/limits_8h_source.html" title=" " alt="" coords="1250,244,1426,271"/>
<area shape="rect" href="../../df/d45/artificial_8h.html" title="Defines RBIMPL_ATTR_ARTIFICIAL." alt="" coords="1377,155,1509,196"/>
<area shape="rect" href="../../d5/dc1/noalias_8h.html" title="Defines RBIMPL_ATTR_NOALIAS." alt="" coords="46,393,178,435"/>
<area shape="rect" href="../../de/d80/nonnull_8h.html" title="Defines RBIMPL_ATTR_NONNULL." alt="" coords="1545,155,1677,196"/>
<area shape="rect" href="../../d4/d3f/value_8h.html" title="Defines VALUE and ID." alt="" coords="1135,80,1290,107"/>
<area shape="rect" href="../../d6/d78/include_2ruby_2internal_2static__assert_8h.html" title="Defines RBIMPL_STATIC_ASSERT." alt="" coords="590,155,731,196"/>
<area shape="rect" href="../../d9/d5e/stdbool_8h.html" title="C99 shim for &lt;stdbool.h&gt;" alt="" coords="1592,80,1758,107"/>
<area shape="rect" title=" " alt="" coords="1336,669,1443,695"/>
<area shape="rect" href="../../df/dec/compiler__is_8h.html" title="Defines RBIMPL_COMPILER_IS." alt="" coords="642,751,833,777"/>
<area shape="rect" href="../../d2/d6e/apple_8h_source.html" title=" " alt="" coords="716,1004,879,1045"/>
<area shape="rect" href="../../de/dbb/clang_8h_source.html" title=" " alt="" coords="411,915,574,956"/>
<area shape="rect" href="../../d4/d99/gcc_8h_source.html" title=" " alt="" coords="598,825,760,867"/>
<area shape="rect" href="../../d5/d80/intel_8h_source.html" title=" " alt="" coords="598,915,760,956"/>
<area shape="rect" href="../../d4/dac/msvc_8h_source.html" title=" " alt="" coords="411,825,574,867"/>
<area shape="rect" href="../../da/d2d/sunpro_8h_source.html" title=" " alt="" coords="886,825,1048,867"/>
<area shape="rect" href="../../dc/d4a/internal_2assume_8h.html" title="Defines RBIMPL_ASSUME / RBIMPL_UNREACHABLE." alt="" coords="846,401,1014,427"/>
<area shape="rect" href="../../dc/d79/cold_8h.html" title="Defines RBIMPL_ATTR_COLD." alt="" coords="1501,393,1633,435"/>
<area shape="rect" href="../../de/d6f/noreturn_8h.html" title="Defines RBIMPL_ATTR_NORETURN." alt="" coords="398,393,530,435"/>
<area shape="rect" href="../../db/de3/dllexport_8h.html" title="Tweaking visibility of C variables/functions." alt="" coords="464,490,640,517"/>
<area shape="rect" href="../../d1/d32/backward_22_2assume_8h.html" title="Defines ASSUME / RB_LIKELY / UNREACHABLE." alt="" coords="944,319,1134,345"/>
<area shape="rect" href="../../d4/d28/warning__push_8h.html" title="Defines RBIMPL_WARNING_PUSH." alt="" coords="893,572,1052,613"/>
<area shape="rect" href="../../d0/dcd/include_2ruby_2internal_2has_2builtin_8h.html" title="Defines RBIMPL_HAS_BUILTIN." alt="" coords="937,490,1122,517"/>
<area shape="rect" href="../../de/ddd/has_2warning_8h.html" title="Defines RBIMPL_HAS_WARNING." alt="" coords="1080,579,1278,606"/>
<area shape="rect" href="../../d3/d7c/attribute_8h.html" title="Defines RBIMPL_HAS_ATTRIBUTE." alt="" coords="1482,490,1684,517"/>
<area shape="rect" href="../../d8/d8d/cpp__attribute_8h.html" title="Defines RBIMPL_HAS_CPP_ATTRIBUTE." alt="" coords="46,572,203,613"/>
<area shape="rect" href="../../d4/d58/declspec__attribute_8h.html" title="Defines RBIMPL_HAS_DECLSPEC_ATTRIBUTE." alt="" coords="252,483,440,524"/>
<area shape="rect" href="../../d7/db0/backward_22_2long__long_8h.html" title="Defines old LONG_LONG." alt="" coords="1146,483,1305,524"/>
<area shape="rect" href="../../d8/d3b/extension_8h.html" title="Defines RBIMPL_HAS_EXTENSION." alt="" coords="421,244,628,271"/>
<area shape="rect" href="../../d2/d74/feature_8h.html" title="Defines RBIMPL_HAS_FEATURE." alt="" coords="405,319,598,345"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d08/atomic_8h__dep__incl.png" border="0" usemap="#ainclude_2ruby_2atomic_8hdep" alt=""/></div>
<map name="ainclude_2ruby_2atomic_8hdep" id="ainclude_2ruby_2atomic_8hdep">
<area shape="rect" title="Atomic operations." alt="" coords="1435,5,1593,32"/>
<area shape="rect" href="../../dc/df3/ruby__atomic_8h_source.html" title=" " alt="" coords="1459,80,1569,107"/>
<area shape="rect" href="../../d8/d16/gc_8c_source.html" title=" " alt="" coords="1916,304,1963,331"/>
<area shape="rect" href="../../df/d0a/io_8c_source.html" title=" " alt="" coords="389,229,431,256"/>
<area shape="rect" href="../../dc/de5/random_8c_source.html" title=" " alt="" coords="1421,155,1501,181"/>
<area shape="rect" href="../../d8/d36/signal_8c_source.html" title=" " alt="" coords="1231,304,1298,331"/>
<area shape="rect" href="../../de/df1/util_8c_source.html" title=" " alt="" coords="1637,155,1687,181"/>
<area shape="rect" href="../../d8/d32/vm__core_8h_source.html" title=" " alt="" coords="1525,155,1612,181"/>
<area shape="rect" href="../../d8/d01/ast_8c_source.html" title=" " alt="" coords="383,304,434,331"/>
<area shape="rect" href="../../df/d8a/builtin_8c_source.html" title=" " alt="" coords="5,304,76,331"/>
<area shape="rect" href="../../d9/d0c/class_8c_source.html" title=" " alt="" coords="659,229,719,256"/>
<area shape="rect" href="../../d2/d47/compile_8c_source.html" title=" " alt="" coords="101,304,181,331"/>
<area shape="rect" href="../../d5/d75/cont_8c_source.html" title=" " alt="" coords="1731,304,1790,331"/>
<area shape="rect" href="../../db/dcc/error_8c_source.html" title=" " alt="" coords="845,229,908,256"/>
<area shape="rect" href="../../d3/d57/eval_8c_source.html" title=" " alt="" coords="894,379,950,405"/>
<area shape="rect" href="../../dd/dd0/eval__intern_8h_source.html" title=" " alt="" coords="1143,229,1245,256"/>
<area shape="rect" href="../../dd/d74/iseq_8c_source.html" title=" " alt="" coords="1537,304,1595,331"/>
<area shape="rect" href="../../d3/dda/proc_8c_source.html" title=" " alt="" coords="701,304,759,331"/>
<area shape="rect" href="../../d3/de7/thread_8c_source.html" title=" " alt="" coords="1440,304,1513,331"/>
<area shape="rect" href="../../de/de9/vm_8c_source.html" title=" " alt="" coords="2026,379,2077,405"/>
<area shape="rect" href="../../d8/d73/vm__backtrace_8c_source.html" title=" " alt="" coords="509,304,625,331"/>
<area shape="rect" href="../../dc/d80/vm__trace_8c_source.html" title=" " alt="" coords="1619,304,1707,331"/>
<area shape="rect" href="../../d7/dc8/iseq_8h_source.html" title=" " alt="" coords="983,229,1042,256"/>
<area shape="rect" href="../../d6/df2/mini__builtin_8c_source.html" title=" " alt="" coords="205,304,308,331"/>
<area shape="rect" href="../../dd/dd7/vm__dump_8c_source.html" title=" " alt="" coords="1322,304,1415,331"/>
<area shape="rect" href="../../dc/d1f/yjit_8c_source.html" title=" " alt="" coords="2089,304,2139,331"/>
<area shape="rect" href="../../d0/d69/mjit_8h_source.html" title=" " alt="" coords="1861,229,1919,256"/>
<area shape="rect" href="../../d7/d5a/mjit__worker_8c_source.html" title=" " alt="" coords="2781,304,2884,331"/>
<area shape="rect" href="../../d0/d85/process_8c_source.html" title=" " alt="" coords="2908,304,2987,331"/>
<area shape="rect" href="../../d2/d0b/version_8c_source.html" title=" " alt="" coords="3063,304,3141,331"/>
<area shape="rect" href="../../dd/d2d/node_8c_source.html" title=" " alt="" coords="1943,229,2007,256"/>
<area shape="rect" href="../../da/d2d/ractor_8c_source.html" title=" " alt="" coords="2345,304,2411,331"/>
<area shape="rect" href="../../d2/dd0/ractor__core_8h_source.html" title=" " alt="" coords="1682,229,1786,256"/>
<area shape="rect" href="../../d0/d2a/variable_8c_source.html" title=" " alt="" coords="2436,304,2517,331"/>
<area shape="rect" href="../../df/d02/vm__sync_8c_source.html" title=" " alt="" coords="2673,304,2757,331"/>
<area shape="rect" href="../../dd/d6c/scheduler_8c_source.html" title=" " alt="" coords="2261,229,2351,256"/>
<area shape="rect" href="../../dd/d53/struct_8c_source.html" title=" " alt="" coords="2376,229,2444,256"/>
<area shape="rect" href="../../df/db5/yjit_8h_source.html" title=" " alt="" coords="2083,229,2135,256"/>
<area shape="rect" href="../../d1/d72/debug_8c_source.html" title=" " alt="" coords="1034,304,1106,331"/>
<area shape="rect" href="../../d6/d9b/eval__jump_8c_source.html" title=" " alt="" coords="917,304,1010,331"/>
<area shape="rect" href="../../d9/dd4/load_8c_source.html" title=" " alt="" coords="783,304,842,331"/>
<area shape="rect" href="../../df/d77/ruby_8c_source.html" title=" " alt="" coords="1528,379,1588,405"/>
<area shape="rect" href="../../dd/d61/miniinit_8c_source.html" title=" " alt="" coords="218,379,295,405"/>
<area shape="rect" href="../../d2/d96/cmdlineopt_8h_source.html" title=" " alt="" coords="2164,304,2320,331"/>
<area shape="rect" href="../../de/d63/vm__method_8c_source.html" title=" " alt="" coords="2542,304,2649,331"/>
</map>
</div>
</div>
<p><a href="../../dd/d02/atomic_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a80bcbc419edb30a364ba804eff0b34af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a80bcbc419edb30a364ba804eff0b34af">RUBY_ATOMIC_GENERIC_MACRO</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a80bcbc419edb30a364ba804eff0b34af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6fee2b57adbd7facd6e70d31b8d953b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#aa6fee2b57adbd7facd6e70d31b8d953b">RUBY_ATOMIC_FETCH_ADD</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_fetch_add(&amp;(var), (val))</td></tr>
<tr class="memdesc:aa6fee2b57adbd7facd6e70d31b8d953b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically replaces the value pointed by <code>var</code> with the result of addition of <code>val</code> to the old value of <code>var</code>.  <a href="../../dd/d02/atomic_8h.html#aa6fee2b57adbd7facd6e70d31b8d953b">More...</a><br /></td></tr>
<tr class="separator:aa6fee2b57adbd7facd6e70d31b8d953b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac229e7389d60792e443e3fccfbbbd04e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#ac229e7389d60792e443e3fccfbbbd04e">RUBY_ATOMIC_FETCH_SUB</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_fetch_sub(&amp;(var), (val))</td></tr>
<tr class="memdesc:ac229e7389d60792e443e3fccfbbbd04e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically replaces the value pointed by <code>var</code> with the result of subtraction of <code>val</code> to the old value of <code>var</code>.  <a href="../../dd/d02/atomic_8h.html#ac229e7389d60792e443e3fccfbbbd04e">More...</a><br /></td></tr>
<tr class="separator:ac229e7389d60792e443e3fccfbbbd04e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c60886077fcc992674a5cc049f58c4c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a0c60886077fcc992674a5cc049f58c4c">RUBY_ATOMIC_OR</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_or(&amp;(var), (val))</td></tr>
<tr class="memdesc:a0c60886077fcc992674a5cc049f58c4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically replaces the value pointed by <code>var</code> with the result of bitwise OR between <code>val</code> and the old value of <code>var</code>.  <a href="../../dd/d02/atomic_8h.html#a0c60886077fcc992674a5cc049f58c4c">More...</a><br /></td></tr>
<tr class="separator:a0c60886077fcc992674a5cc049f58c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed498a60b027b9861fe31e096cc8b7b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b">RUBY_ATOMIC_EXCHANGE</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_exchange(&amp;(var), (val))</td></tr>
<tr class="memdesc:afed498a60b027b9861fe31e096cc8b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically replaces the value pointed by <code>var</code> with <code>val</code>.  <a href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b">More...</a><br /></td></tr>
<tr class="separator:afed498a60b027b9861fe31e096cc8b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7510bbf38179e6abff9657b43f9eeaec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec">RUBY_ATOMIC_CAS</a>(var,  oldval,  newval)&#160;&#160;&#160;    rbimpl_atomic_cas(&amp;(var), (oldval), (newval))</td></tr>
<tr class="memdesc:a7510bbf38179e6abff9657b43f9eeaec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomic compare-and-swap.  <a href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec">More...</a><br /></td></tr>
<tr class="separator:a7510bbf38179e6abff9657b43f9eeaec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8efb68c31df39507fdec6ae2fe5a6e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#af8efb68c31df39507fdec6ae2fe5a6e6">RUBY_ATOMIC_SET</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_set(&amp;(var), (val))</td></tr>
<tr class="memdesc:af8efb68c31df39507fdec6ae2fe5a6e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except for the return type.  <a href="../../dd/d02/atomic_8h.html#af8efb68c31df39507fdec6ae2fe5a6e6">More...</a><br /></td></tr>
<tr class="separator:af8efb68c31df39507fdec6ae2fe5a6e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9e6b0be98a46a0374cb0d44b245a5fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#aa9e6b0be98a46a0374cb0d44b245a5fa">RUBY_ATOMIC_ADD</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_add(&amp;(var), (val))</td></tr>
<tr class="memdesc:aa9e6b0be98a46a0374cb0d44b245a5fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#aa6fee2b57adbd7facd6e70d31b8d953b" title="Atomically replaces the value pointed by var with the result of addition of val to the old value of v...">RUBY_ATOMIC_FETCH_ADD</a>, except for the return type.  <a href="../../dd/d02/atomic_8h.html#aa9e6b0be98a46a0374cb0d44b245a5fa">More...</a><br /></td></tr>
<tr class="separator:aa9e6b0be98a46a0374cb0d44b245a5fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad321cb7716f1409379e6c11c4ec7e98b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#ad321cb7716f1409379e6c11c4ec7e98b">RUBY_ATOMIC_SUB</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_sub(&amp;(var), (val))</td></tr>
<tr class="memdesc:ad321cb7716f1409379e6c11c4ec7e98b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#ac229e7389d60792e443e3fccfbbbd04e" title="Atomically replaces the value pointed by var with the result of subtraction of val to the old value o...">RUBY_ATOMIC_FETCH_SUB</a>, except for the return type.  <a href="../../dd/d02/atomic_8h.html#ad321cb7716f1409379e6c11c4ec7e98b">More...</a><br /></td></tr>
<tr class="separator:ad321cb7716f1409379e6c11c4ec7e98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f8597c927cb55c959f70a20a00285e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a35f8597c927cb55c959f70a20a00285e">RUBY_ATOMIC_INC</a>(var)&#160;&#160;&#160;rbimpl_atomic_inc(&amp;(var))</td></tr>
<tr class="memdesc:a35f8597c927cb55c959f70a20a00285e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically increments the value pointed by <code>var</code>.  <a href="../../dd/d02/atomic_8h.html#a35f8597c927cb55c959f70a20a00285e">More...</a><br /></td></tr>
<tr class="separator:a35f8597c927cb55c959f70a20a00285e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9835e21e579dde564490dec3fc90590"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#ad9835e21e579dde564490dec3fc90590">RUBY_ATOMIC_DEC</a>(var)&#160;&#160;&#160;rbimpl_atomic_dec(&amp;(var))</td></tr>
<tr class="memdesc:ad9835e21e579dde564490dec3fc90590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically decrements the value pointed by <code>var</code>.  <a href="../../dd/d02/atomic_8h.html#ad9835e21e579dde564490dec3fc90590">More...</a><br /></td></tr>
<tr class="separator:ad9835e21e579dde564490dec3fc90590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba073d84a0c594cdeb653b31495ef26"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a6ba073d84a0c594cdeb653b31495ef26">RUBY_ATOMIC_SIZE_INC</a>(var)&#160;&#160;&#160;rbimpl_atomic_size_inc(&amp;(var))</td></tr>
<tr class="memdesc:a6ba073d84a0c594cdeb653b31495ef26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a35f8597c927cb55c959f70a20a00285e" title="Atomically increments the value pointed by var.">RUBY_ATOMIC_INC</a>, except it expects its argument is <code>size_t</code>.  <a href="../../dd/d02/atomic_8h.html#a6ba073d84a0c594cdeb653b31495ef26">More...</a><br /></td></tr>
<tr class="separator:a6ba073d84a0c594cdeb653b31495ef26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a376c478700d8c50f2a493cdbb1b78d3c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a376c478700d8c50f2a493cdbb1b78d3c">RUBY_ATOMIC_SIZE_DEC</a>(var)&#160;&#160;&#160;rbimpl_atomic_size_dec(&amp;(var))</td></tr>
<tr class="memdesc:a376c478700d8c50f2a493cdbb1b78d3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#ad9835e21e579dde564490dec3fc90590" title="Atomically decrements the value pointed by var.">RUBY_ATOMIC_DEC</a>, except it expects its argument is <code>size_t</code>.  <a href="../../dd/d02/atomic_8h.html#a376c478700d8c50f2a493cdbb1b78d3c">More...</a><br /></td></tr>
<tr class="separator:a376c478700d8c50f2a493cdbb1b78d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a97171cd7b41cfeec7d84aeb9143c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a59a97171cd7b41cfeec7d84aeb9143c7">RUBY_ATOMIC_SIZE_EXCHANGE</a>(var,  val)&#160;&#160;&#160;    rbimpl_atomic_size_exchange(&amp;(var), (val))</td></tr>
<tr class="memdesc:a59a97171cd7b41cfeec7d84aeb9143c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except it expects its arguments are <code>size_t</code>.  <a href="../../dd/d02/atomic_8h.html#a59a97171cd7b41cfeec7d84aeb9143c7">More...</a><br /></td></tr>
<tr class="separator:a59a97171cd7b41cfeec7d84aeb9143c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d634abacd1545edf4c0158e7beaf0c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a83d634abacd1545edf4c0158e7beaf0c">RUBY_ATOMIC_SIZE_CAS</a>(var,  oldval,  newval)&#160;&#160;&#160;    rbimpl_atomic_size_cas(&amp;(var), (oldval), (newval))</td></tr>
<tr class="memdesc:a83d634abacd1545edf4c0158e7beaf0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec" title="Atomic compare-and-swap.">RUBY_ATOMIC_CAS</a>, except it expects its arguments are <code>size_t</code>.  <a href="../../dd/d02/atomic_8h.html#a83d634abacd1545edf4c0158e7beaf0c">More...</a><br /></td></tr>
<tr class="separator:a83d634abacd1545edf4c0158e7beaf0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c02e1b98df5f4f7264e80ba3511b5a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a9c02e1b98df5f4f7264e80ba3511b5a2">RUBY_ATOMIC_SIZE_ADD</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_size_add(&amp;(var), (val))</td></tr>
<tr class="memdesc:a9c02e1b98df5f4f7264e80ba3511b5a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#aa9e6b0be98a46a0374cb0d44b245a5fa" title="Identical to RUBY_ATOMIC_FETCH_ADD, except for the return type.">RUBY_ATOMIC_ADD</a>, except it expects its arguments are <code>size_t</code>.  <a href="../../dd/d02/atomic_8h.html#a9c02e1b98df5f4f7264e80ba3511b5a2">More...</a><br /></td></tr>
<tr class="separator:a9c02e1b98df5f4f7264e80ba3511b5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b9017d153c77e6cdd1e791b0a80e72"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a06b9017d153c77e6cdd1e791b0a80e72">RUBY_ATOMIC_SIZE_SUB</a>(var,  val)&#160;&#160;&#160;rbimpl_atomic_size_sub(&amp;(var), (val))</td></tr>
<tr class="memdesc:a06b9017d153c77e6cdd1e791b0a80e72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#ad321cb7716f1409379e6c11c4ec7e98b" title="Identical to RUBY_ATOMIC_FETCH_SUB, except for the return type.">RUBY_ATOMIC_SUB</a>, except it expects its arguments are <code>size_t</code>.  <a href="../../dd/d02/atomic_8h.html#a06b9017d153c77e6cdd1e791b0a80e72">More...</a><br /></td></tr>
<tr class="separator:a06b9017d153c77e6cdd1e791b0a80e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0fc86810ed5509610e05777af40d9f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#aa0fc86810ed5509610e05777af40d9f5">RUBY_ATOMIC_PTR_EXCHANGE</a>(var,  val)&#160;&#160;&#160;    RBIMPL_CAST(rbimpl_atomic_ptr_exchange((void **)&amp;(var), (void *)val))</td></tr>
<tr class="memdesc:aa0fc86810ed5509610e05777af40d9f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except it expects its arguments are <code>void*</code>.  <a href="../../dd/d02/atomic_8h.html#aa0fc86810ed5509610e05777af40d9f5">More...</a><br /></td></tr>
<tr class="separator:aa0fc86810ed5509610e05777af40d9f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5915e344b8834ab9b18ad8285b48606a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a5915e344b8834ab9b18ad8285b48606a">RUBY_ATOMIC_PTR_CAS</a>(var,  oldval,  newval)&#160;&#160;&#160;    RBIMPL_CAST(rbimpl_atomic_ptr_cas((void **)&amp;(var), (oldval), (newval)))</td></tr>
<tr class="memdesc:a5915e344b8834ab9b18ad8285b48606a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec" title="Atomic compare-and-swap.">RUBY_ATOMIC_CAS</a>, except it expects its arguments are <code>void*</code>.  <a href="../../dd/d02/atomic_8h.html#a5915e344b8834ab9b18ad8285b48606a">More...</a><br /></td></tr>
<tr class="separator:a5915e344b8834ab9b18ad8285b48606a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5cf520220d1e32f697f9c1ff8473f42"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#ad5cf520220d1e32f697f9c1ff8473f42">RUBY_ATOMIC_VALUE_EXCHANGE</a>(var,  val)&#160;&#160;&#160;    rbimpl_atomic_value_exchange(&amp;(var), (val))</td></tr>
<tr class="memdesc:ad5cf520220d1e32f697f9c1ff8473f42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except it expects its arguments are <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>.  <a href="../../dd/d02/atomic_8h.html#ad5cf520220d1e32f697f9c1ff8473f42">More...</a><br /></td></tr>
<tr class="separator:ad5cf520220d1e32f697f9c1ff8473f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b94d020b65904a726436c150c9379d4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a0b94d020b65904a726436c150c9379d4">RUBY_ATOMIC_VALUE_CAS</a>(var,  oldval,  newval)&#160;&#160;&#160;    rbimpl_atomic_value_cas(&amp;(var), (oldval), (newval))</td></tr>
<tr class="memdesc:a0b94d020b65904a726436c150c9379d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec" title="Atomic compare-and-swap.">RUBY_ATOMIC_CAS</a>, except it expects its arguments are <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>.  <a href="../../dd/d02/atomic_8h.html#a0b94d020b65904a726436c150c9379d4">More...</a><br /></td></tr>
<tr class="separator:a0b94d020b65904a726436c150c9379d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a915effa00bf8dbb2dc4220f2d8851541"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541">rb_atomic_t</a> = std::atomic&lt; unsigned &gt;</td></tr>
<tr class="memdesc:a915effa00bf8dbb2dc4220f2d8851541"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type that is eligible for atomic operations.  <a href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541">More...</a><br /></td></tr>
<tr class="separator:a915effa00bf8dbb2dc4220f2d8851541"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Atomic operations. </p>
<dl class="section author"><dt>Author</dt><dd>Ruby developers <a href="#" onclick="location.href='mai'+'lto:'+'rub'+'y-'+'cor'+'e@'+'rub'+'y-'+'lan'+'g.'+'org'; return false;">ruby-<span class="obfuscator">.nosp@m.</span>core<span class="obfuscator">.nosp@m.</span>@ruby<span class="obfuscator">.nosp@m.</span>-lan<span class="obfuscator">.nosp@m.</span>g.org</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This file is a part of the programming language Ruby. Permission is hereby granted, to either redistribute and/or modify this file, provided that the conditions mentioned in the file COPYING are met. Consult the file for details. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Symbols prefixed with either <code>RBIMPL</code> or <code>rbimpl</code> are implementation details. Don't take them as canon. They could rapidly appear then vanish. The name (path) of this header file is also an implementation detail. Do not expect it to persist at the place it is now. Developers are free to move it anywhere anytime at will. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>To ruby-core: remember that this header can be possibly recursively included from extension libraries written in C++. Do not expect for instance <code>__VA_ARGS__</code> is always available. We assume C99 for ruby itself but we don't assume languages of extension libraries. They could be written in C++98.</dd></dl>
<p>Basically, if we could assume either C11 or C++11, these macros are just redundant. Sadly we cannot. We have to do them ourselves. </p>

<p class="definition">Definition in file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa9e6b0be98a46a0374cb0d44b245a5fa" name="aa9e6b0be98a46a0374cb0d44b245a5fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9e6b0be98a46a0374cb0d44b245a5fa">&#9670;&nbsp;</a></span>RUBY_ATOMIC_ADD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_ADD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_add(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#aa6fee2b57adbd7facd6e70d31b8d953b" title="Atomically replaces the value pointed by var with the result of addition of val to the old value of v...">RUBY_ATOMIC_FETCH_ADD</a>, except for the return type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to add. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var + val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00159">159</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a7510bbf38179e6abff9657b43f9eeaec" name="a7510bbf38179e6abff9657b43f9eeaec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7510bbf38179e6abff9657b43f9eeaec">&#9670;&nbsp;</a></span>RUBY_ATOMIC_CAS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_CAS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">oldval, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    rbimpl_atomic_cas(&amp;(var), (oldval), (newval))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomic compare-and-swap. </p>
<p >This stores <code>val</code> to <code>var</code> if and only if the assignment changes the value of <code>var</code> from <code>oldval</code> to <code>newval</code>. You can detect whether the assignment happened or not using the return value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">oldval</td><td>Expected value of <code>var</code> before the assignment. </td></tr>
    <tr><td class="paramname">newval</td><td>What you want to store at <code>var</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">oldval</td><td>Successful assignment (<code>var</code> is now <code>newval</code>). </td></tr>
    <tr><td class="paramname">otherwise</td><td>Something else is at <code>var</code>; not updated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00138">138</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="ad9835e21e579dde564490dec3fc90590" name="ad9835e21e579dde564490dec3fc90590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9835e21e579dde564490dec3fc90590">&#9670;&nbsp;</a></span>RUBY_ATOMIC_DEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_DEC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var</td><td>)</td>
          <td>&#160;&#160;&#160;rbimpl_atomic_dec(&amp;(var))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically decrements the value pointed by <code>var</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var - 1</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00187">187</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="afed498a60b027b9861fe31e096cc8b7b" name="afed498a60b027b9861fe31e096cc8b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afed498a60b027b9861fe31e096cc8b7b">&#9670;&nbsp;</a></span>RUBY_ATOMIC_EXCHANGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_EXCHANGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_exchange(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically replaces the value pointed by <code>var</code> with <code>val</code>. </p>
<p >This is just an assignment, but you can additionally know the previous value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>What was stored in <code>var</code> before the assignment. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00125">125</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="aa6fee2b57adbd7facd6e70d31b8d953b" name="aa6fee2b57adbd7facd6e70d31b8d953b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6fee2b57adbd7facd6e70d31b8d953b">&#9670;&nbsp;</a></span>RUBY_ATOMIC_FETCH_ADD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_FETCH_ADD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_fetch_add(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically replaces the value pointed by <code>var</code> with the result of addition of <code>val</code> to the old value of <code>var</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to add. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>What was stored in <code>var</code> before the addition. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var + val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00091">91</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="ac229e7389d60792e443e3fccfbbbd04e" name="ac229e7389d60792e443e3fccfbbbd04e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac229e7389d60792e443e3fccfbbbd04e">&#9670;&nbsp;</a></span>RUBY_ATOMIC_FETCH_SUB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_FETCH_SUB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_fetch_sub(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically replaces the value pointed by <code>var</code> with the result of subtraction of <code>val</code> to the old value of <code>var</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to subtract. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>What was stored in <code>var</code> before the subtraction. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var - val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00102">102</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a80bcbc419edb30a364ba804eff0b34af" name="a80bcbc419edb30a364ba804eff0b34af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80bcbc419edb30a364ba804eff0b34af">&#9670;&nbsp;</a></span>RUBY_ATOMIC_GENERIC_MACRO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_GENERIC_MACRO&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00060">60</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a35f8597c927cb55c959f70a20a00285e" name="a35f8597c927cb55c959f70a20a00285e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35f8597c927cb55c959f70a20a00285e">&#9670;&nbsp;</a></span>RUBY_ATOMIC_INC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_INC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var</td><td>)</td>
          <td>&#160;&#160;&#160;rbimpl_atomic_inc(&amp;(var))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically increments the value pointed by <code>var</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var + 1</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00178">178</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a0c60886077fcc992674a5cc049f58c4c" name="a0c60886077fcc992674a5cc049f58c4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c60886077fcc992674a5cc049f58c4c">&#9670;&nbsp;</a></span>RUBY_ATOMIC_OR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_OR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_or(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically replaces the value pointed by <code>var</code> with the result of bitwise OR between <code>val</code> and the old value of <code>var</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to mix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var | val</code>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>For portability, this macro can return void. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00114">114</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a5915e344b8834ab9b18ad8285b48606a" name="a5915e344b8834ab9b18ad8285b48606a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5915e344b8834ab9b18ad8285b48606a">&#9670;&nbsp;</a></span>RUBY_ATOMIC_PTR_CAS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_PTR_CAS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">oldval, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    RBIMPL_CAST(rbimpl_atomic_ptr_cas((void **)&amp;(var), (oldval), (newval)))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec" title="Atomic compare-and-swap.">RUBY_ATOMIC_CAS</a>, except it expects its arguments are <code>void*</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>void*</code> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>void*</code>. </td></tr>
    <tr><td class="paramname">oldval</td><td>Expected value of <code>var</code> before the assignment. </td></tr>
    <tr><td class="paramname">newval</td><td>What you want to store at <code>var</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">oldval</td><td>Successful assignment (<code>var</code> is now <code>newval</code>). </td></tr>
    <tr><td class="paramname">otherwise</td><td>Something else is at <code>var</code>; not updated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00293">293</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="aa0fc86810ed5509610e05777af40d9f5" name="aa0fc86810ed5509610e05777af40d9f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0fc86810ed5509610e05777af40d9f5">&#9670;&nbsp;</a></span>RUBY_ATOMIC_PTR_EXCHANGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_PTR_EXCHANGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    RBIMPL_CAST(rbimpl_atomic_ptr_exchange((void **)&amp;(var), (void *)val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except it expects its arguments are <code>void*</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>void*</code> is 64bit. This should be used for pointer related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>void *</code>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>What was stored in <code>var</code> before the assignment. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00279">279</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="af8efb68c31df39507fdec6ae2fe5a6e6" name="af8efb68c31df39507fdec6ae2fe5a6e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8efb68c31df39507fdec6ae2fe5a6e6">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SET</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_set(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except for the return type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00149">149</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a9c02e1b98df5f4f7264e80ba3511b5a2" name="a9c02e1b98df5f4f7264e80ba3511b5a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c02e1b98df5f4f7264e80ba3511b5a2">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SIZE_ADD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SIZE_ADD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_size_add(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#aa9e6b0be98a46a0374cb0d44b245a5fa" title="Identical to RUBY_ATOMIC_FETCH_ADD, except for the return type.">RUBY_ATOMIC_ADD</a>, except it expects its arguments are <code>size_t</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>size_t</code> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>size_t</code>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to add. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var + val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00249">249</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a83d634abacd1545edf4c0158e7beaf0c" name="a83d634abacd1545edf4c0158e7beaf0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d634abacd1545edf4c0158e7beaf0c">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SIZE_CAS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SIZE_CAS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">oldval, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    rbimpl_atomic_size_cas(&amp;(var), (oldval), (newval))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec" title="Atomic compare-and-swap.">RUBY_ATOMIC_CAS</a>, except it expects its arguments are <code>size_t</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>size_t</code> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>size_t</code>. </td></tr>
    <tr><td class="paramname">oldval</td><td>Expected value of <code>var</code> before the assignment. </td></tr>
    <tr><td class="paramname">newval</td><td>What you want to store at <code>var</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">oldval</td><td>Successful assignment (<code>var</code> is now <code>newval</code>). </td></tr>
    <tr><td class="paramname">otherwise</td><td>Something else is at <code>var</code>; not updated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00236">236</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a376c478700d8c50f2a493cdbb1b78d3c" name="a376c478700d8c50f2a493cdbb1b78d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a376c478700d8c50f2a493cdbb1b78d3c">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SIZE_DEC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SIZE_DEC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var</td><td>)</td>
          <td>&#160;&#160;&#160;rbimpl_atomic_size_dec(&amp;(var))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#ad9835e21e579dde564490dec3fc90590" title="Atomically decrements the value pointed by var.">RUBY_ATOMIC_DEC</a>, except it expects its argument is <code>size_t</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>size_t</code> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>size_t</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var - 1</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00209">209</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a59a97171cd7b41cfeec7d84aeb9143c7" name="a59a97171cd7b41cfeec7d84aeb9143c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59a97171cd7b41cfeec7d84aeb9143c7">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SIZE_EXCHANGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SIZE_EXCHANGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    rbimpl_atomic_size_exchange(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except it expects its arguments are <code>size_t</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>size_t</code> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>size_t</code>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>What was stored in <code>var</code> before the assignment. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00222">222</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a6ba073d84a0c594cdeb653b31495ef26" name="a6ba073d84a0c594cdeb653b31495ef26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba073d84a0c594cdeb653b31495ef26">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SIZE_INC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SIZE_INC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var</td><td>)</td>
          <td>&#160;&#160;&#160;rbimpl_atomic_size_inc(&amp;(var))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a35f8597c927cb55c959f70a20a00285e" title="Atomically increments the value pointed by var.">RUBY_ATOMIC_INC</a>, except it expects its argument is <code>size_t</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>size_t</code> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>size_t</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var + 1</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00198">198</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a06b9017d153c77e6cdd1e791b0a80e72" name="a06b9017d153c77e6cdd1e791b0a80e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06b9017d153c77e6cdd1e791b0a80e72">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SIZE_SUB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SIZE_SUB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_size_sub(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#ad321cb7716f1409379e6c11c4ec7e98b" title="Identical to RUBY_ATOMIC_FETCH_SUB, except for the return type.">RUBY_ATOMIC_SUB</a>, except it expects its arguments are <code>size_t</code>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <code>size_t</code> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>size_t</code>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to subtract. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var - val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00261">261</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="ad321cb7716f1409379e6c11c4ec7e98b" name="ad321cb7716f1409379e6c11c4ec7e98b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad321cb7716f1409379e6c11c4ec7e98b">&#9670;&nbsp;</a></span>RUBY_ATOMIC_SUB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_SUB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;rbimpl_atomic_sub(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#ac229e7389d60792e443e3fccfbbbd04e" title="Atomically replaces the value pointed by var with the result of subtraction of val to the old value o...">RUBY_ATOMIC_FETCH_SUB</a>, except for the return type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to subtract. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>var - val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00169">169</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="a0b94d020b65904a726436c150c9379d4" name="a0b94d020b65904a726436c150c9379d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b94d020b65904a726436c150c9379d4">&#9670;&nbsp;</a></span>RUBY_ATOMIC_VALUE_CAS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_VALUE_CAS</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">oldval, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">newval&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    rbimpl_atomic_value_cas(&amp;(var), (oldval), (newval))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#a7510bbf38179e6abff9657b43f9eeaec" title="Atomic compare-and-swap.">RUBY_ATOMIC_CAS</a>, except it expects its arguments are <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a> is 64bit. This should be used for size related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <code>void*</code>. </td></tr>
    <tr><td class="paramname">oldval</td><td>Expected value of <code>var</code> before the assignment. </td></tr>
    <tr><td class="paramname">newval</td><td>What you want to store at <code>var</code>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">oldval</td><td>Successful assignment (<code>var</code> is now <code>newval</code>). </td></tr>
    <tr><td class="paramname">otherwise</td><td>Something else is at <code>var</code>; not updated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00321">321</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<a id="ad5cf520220d1e32f697f9c1ff8473f42" name="ad5cf520220d1e32f697f9c1ff8473f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5cf520220d1e32f697f9c1ff8473f42">&#9670;&nbsp;</a></span>RUBY_ATOMIC_VALUE_EXCHANGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RUBY_ATOMIC_VALUE_EXCHANGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">var, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;    rbimpl_atomic_value_exchange(&amp;(var), (val))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../dd/d02/atomic_8h.html#afed498a60b027b9861fe31e096cc8b7b" title="Atomically replaces the value pointed by var with val.">RUBY_ATOMIC_EXCHANGE</a>, except it expects its arguments are <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>. </p>
<p >There are cases where <a class="el" href="../../dd/d02/atomic_8h.html#a915effa00bf8dbb2dc4220f2d8851541" title="Type that is eligible for atomic operations.">rb_atomic_t</a> is 32bit while <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a> is 64bit. This should be used for pointer related operations to support such platforms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">var</td><td>A variable of <a class="el" href="../../d4/d3f/value_8h.html#af5fa1600fbcceb5c1bbe27dd3eaab113" title="Type that represents a Ruby object.">VALUE</a>. </td></tr>
    <tr><td class="paramname">val</td><td>Value to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>What was stored in <code>var</code> before the assignment. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><code>var</code> holds <code>val</code>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00307">307</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a915effa00bf8dbb2dc4220f2d8851541" name="a915effa00bf8dbb2dc4220f2d8851541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a915effa00bf8dbb2dc4220f2d8851541">&#9670;&nbsp;</a></span>rb_atomic_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using rb_atomic_t =  std::atomic&lt;unsigned&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type that is eligible for atomic operations. </p>
<p >Depending on your host platform you might have more than one such type, but we choose one of them anyways. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d02/atomic_8h_source.html#l00069">69</a> of file <a class="el" href="../../dd/d02/atomic_8h_source.html">atomic.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
