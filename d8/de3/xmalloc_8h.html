<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ruby: include/ruby/internal/xmalloc.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Ruby<span id="projectnumber">&#160;3.2.0dev (2022-06-11 revision 0e2c01bd094617f5c82759bdab03bb786ce89d56)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_82434f6a8a39055b35115fc8d4134985.html">ruby</a></li><li class="navelem"><a class="el" href="../../dir_d6751d5d626a7ea074f9888503e0de14.html">internal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">xmalloc.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<h3 class="version">(28b7b0e13e261006dee4b4d9152aaabdb1286718)</h3>
<p>Declares <a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ruby/internal/config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/ddc/alloc__size_8h_source.html">ruby/internal/attr/alloc_size.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d81/nodiscard_8h_source.html">ruby/internal/attr/nodiscard.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d01/noexcept_8h_source.html">ruby/internal/attr/noexcept.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/dbd/restrict_8h_source.html">ruby/internal/attr/restrict.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/db2/returns__nonnull_8h_source.html">ruby/internal/attr/returns_nonnull.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de3/dllexport_8h_source.html">ruby/internal/dllexport.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for xmalloc.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d33/xmalloc_8h__incl.png" border="0" usemap="#ainclude_2ruby_2internal_2xmalloc_8h" alt=""/></div>
<map name="ainclude_2ruby_2internal_2xmalloc_8h" id="ainclude_2ruby_2internal_2xmalloc_8h">
<area shape="rect" title="Declares ruby_xmalloc()." alt="" coords="468,5,621,47"/>
<area shape="rect" href="../../db/d16/config_8h_source.html" title=" " alt="" coords="721,281,880,307"/>
<area shape="rect" href="../../d8/ddc/alloc__size_8h.html" title="Defines RBIMPL_ATTR_ALLOC_SIZE." alt="" coords="479,95,611,136"/>
<area shape="rect" href="../../db/d81/nodiscard_8h.html" title="Defines RBIMPL_ATTR_NODISCARD." alt="" coords="635,95,767,136"/>
<area shape="rect" href="../../db/d01/noexcept_8h.html" title="Defines RBIMPL_ATTR_NOEXCEPT." alt="" coords="5,95,137,136"/>
<area shape="rect" href="../../d8/dbd/restrict_8h.html" title="Defines RBIMPL_ATTR_RESTRICT." alt="" coords="161,95,293,136"/>
<area shape="rect" href="../../d6/db2/returns__nonnull_8h.html" title="Defines RBIMPL_ATTR_RETURNS_NONNULL." alt="" coords="317,95,455,136"/>
<area shape="rect" href="../../db/de3/dllexport_8h.html" title="Tweaking visibility of C variables/functions." alt="" coords="842,191,1018,218"/>
<area shape="rect" title=" " alt="" coords="747,370,854,397"/>
<area shape="rect" href="../../dc/db4/compiler__since_8h.html" title="Defines RBIMPL_COMPILER_SINCE." alt="" coords="398,363,561,404"/>
<area shape="rect" href="../../df/dec/compiler__is_8h.html" title="Defines RBIMPL_COMPILER_IS." alt="" coords="516,452,707,479"/>
<area shape="rect" href="../../d2/d6e/apple_8h_source.html" title=" " alt="" coords="497,705,659,747"/>
<area shape="rect" href="../../de/dbb/clang_8h_source.html" title=" " alt="" coords="497,616,659,657"/>
<area shape="rect" href="../../d4/d99/gcc_8h_source.html" title=" " alt="" coords="285,527,447,568"/>
<area shape="rect" href="../../d5/d80/intel_8h_source.html" title=" " alt="" coords="310,616,473,657"/>
<area shape="rect" href="../../d4/dac/msvc_8h_source.html" title=" " alt="" coords="471,527,634,568"/>
<area shape="rect" href="../../da/d2d/sunpro_8h_source.html" title=" " alt="" coords="759,527,922,568"/>
<area shape="rect" href="../../d3/d7c/attribute_8h.html" title="Defines RBIMPL_HAS_ATTRIBUTE." alt="" coords="349,191,551,218"/>
<area shape="rect" href="../../d8/d12/c__attribute_8h.html" title="Defines RBIMPL_HAS_C_ATTRIBUTE." alt="" coords="575,184,717,225"/>
<area shape="rect" href="../../d8/d8d/cpp__attribute_8h.html" title="Defines RBIMPL_HAS_CPP_ATTRIBUTE." alt="" coords="533,273,690,315"/>
<area shape="rect" href="../../d2/d74/feature_8h.html" title="Defines RBIMPL_HAS_FEATURE." alt="" coords="80,191,273,218"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d12/xmalloc_8h__dep__incl.png" border="0" usemap="#ainclude_2ruby_2internal_2xmalloc_8hdep" alt=""/></div>
<map name="ainclude_2ruby_2internal_2xmalloc_8hdep" id="ainclude_2ruby_2internal_2xmalloc_8hdep">
<area shape="rect" title="Declares ruby_xmalloc()." alt="" coords="3755,5,3909,47"/>
<area shape="rect" href="../../d8/db0/defines_8h.html" title=" " alt="" coords="3925,95,4088,121"/>
<area shape="rect" href="../../dc/d18/memory_8h.html" title="Memory management stuff." alt="" coords="3561,169,3714,211"/>
<area shape="rect" href="../../df/d04/addr2line_8c_source.html" title=" " alt="" coords="4381,177,4472,203"/>
<area shape="rect" href="../../df/da8/dln_8h_source.html" title=" " alt="" coords="847,713,900,739"/>
<area shape="rect" href="../../db/d2e/intern_8h.html" title=" " alt="" coords="10795,445,10949,471"/>
<area shape="rect" href="../../de/de6/ruby_2ruby_8h.html" title=" " alt="" coords="6445,534,6590,561"/>
<area shape="rect" href="../../dc/de3/rdata_8h.html" title="Defines struct RData." alt="" coords="4782,259,4935,300"/>
<area shape="rect" href="../../d4/dbc/fl__type_8h.html" title="Defines enum ruby_fl_type." alt="" coords="4203,169,4357,211"/>
<area shape="rect" href="../../dd/d24/st_8h_source.html" title=" " alt="" coords="10320,266,10448,293"/>
<area shape="rect" href="../../da/df7/include_2ruby_2util_8h.html" title=" " alt="" coords="4811,802,4947,829"/>
<area shape="rect" href="../../db/d11/serial_8h_source.html" title=" " alt="" coords="6009,534,6129,561"/>
<area shape="rect" href="../../d1/ddc/dln_8c_source.html" title=" " alt="" coords="1739,802,1789,829"/>
<area shape="rect" href="../../d7/d1e/dln__find_8c_source.html" title=" " alt="" coords="318,802,399,829"/>
<area shape="rect" href="../../d5/df2/win32_8c_source.html" title=" " alt="" coords="225,884,335,911"/>
<area shape="rect" href="../../d6/d13/file_8c_source.html" title=" " alt="" coords="1168,884,1219,911"/>
<area shape="rect" href="../../df/d0a/io_8c_source.html" title=" " alt="" coords="3351,884,3393,911"/>
<area shape="rect" href="../../d9/dd4/load_8c_source.html" title=" " alt="" coords="1507,884,1565,911"/>
<area shape="rect" href="../../d7/d5a/mjit__worker_8c_source.html" title=" " alt="" coords="4361,884,4463,911"/>
<area shape="rect" href="../../d0/d85/process_8c_source.html" title=" " alt="" coords="3966,884,4045,911"/>
<area shape="rect" href="../../df/d77/ruby_8c_source.html" title=" " alt="" coords="2098,884,2158,911"/>
<area shape="rect" href="../../df/d69/internal_2class_8h_source.html" title=" " alt="" coords="9536,713,9651,739"/>
<area shape="rect" href="../../d3/da2/internal_2error_8h_source.html" title=" " alt="" coords="5224,802,5341,829"/>
<area shape="rect" href="../../d3/d26/internal_2numeric_8h_source.html" title=" " alt="" coords="10843,713,10981,739"/>
<area shape="rect" href="../../d3/d66/internal_2enumerator_8h_source.html" title=" " alt="" coords="13070,713,13229,739"/>
<area shape="rect" href="../../d5/d97/internal_2fixnum_8h_source.html" title=" " alt="" coords="10833,623,10964,650"/>
<area shape="rect" href="../../d8/dfd/internal_2thread_8h_source.html" title=" " alt="" coords="4659,802,4787,829"/>
<area shape="rect" href="../../de/d6d/compar_8c_source.html" title=" " alt="" coords="6911,884,6987,911"/>
<area shape="rect" href="../../dd/d17/constant_8h_source.html" title=" " alt="" coords="8534,713,8621,739"/>
<area shape="rect" href="../../dd/d9e/internal_2variable_8h_source.html" title=" " alt="" coords="7363,802,7499,829"/>
<area shape="rect" href="../../dd/d2d/node_8c_source.html" title=" " alt="" coords="11872,884,11936,911"/>
<area shape="rect" href="../../db/d97/parse_8c_source.html" title=" " alt="" coords="4897,884,4964,911"/>
<area shape="rect" href="../../d6/d5a/transient__heap_8c_source.html" title=" " alt="" coords="8425,884,8549,911"/>
<area shape="rect" href="../../d3/d2c/debug__counter_8h_source.html" title=" " alt="" coords="10033,802,10159,829"/>
<area shape="rect" href="../../de/d32/dir_8c_source.html" title=" " alt="" coords="1854,884,1901,911"/>
<area shape="rect" href="../../da/d0d/dmydln_8c_source.html" title=" " alt="" coords="6758,623,6837,650"/>
<area shape="rect" href="../../de/d46/enumerator_8c_source.html" title=" " alt="" coords="12961,884,13065,911"/>
<area shape="rect" href="../../dd/dd0/eval__intern_8h_source.html" title=" " alt="" coords="2265,802,2367,829"/>
<area shape="rect" href="../../d0/daa/gc_8h_source.html" title=" " alt="" coords="5973,802,6021,829"/>
<area shape="rect" href="../../da/d2d/ractor_8c_source.html" title=" " alt="" coords="5949,884,6016,911"/>
<area shape="rect" href="../../da/d59/gems_2src_2debug_2ext_2debug_2debug_8c_source.html" title=" " alt="" coords="1127,705,1273,747"/>
<area shape="rect" href="../../d9/d39/iseq__collector_8c_source.html" title=" " alt="" coords="6861,616,7024,657"/>
<area shape="rect" href="../../d1/ddc/hrtime_8h_source.html" title=" " alt="" coords="3537,802,3613,829"/>
<area shape="rect" href="../../db/d0a/id__table_8h_source.html" title=" " alt="" coords="8584,623,8667,650"/>
<area shape="rect" href="../../d9/d2b/internal_2object_8h_source.html" title=" " alt="" coords="6504,802,6629,829"/>
<area shape="rect" href="../../d6/d10/marshal_8c_source.html" title=" " alt="" coords="10405,884,10486,911"/>
<area shape="rect" href="../../d2/dd0/ractor__core_8h_source.html" title=" " alt="" coords="6829,802,6933,829"/>
<area shape="rect" href="../../d9/d3f/ruby_8h_source.html" title=" " alt="" coords="2443,802,2554,829"/>
<area shape="rect" href="../../db/da0/include_2ruby_2encoding_8h.html" title="Encoding relates APIs." alt="" coords="3158,623,3333,650"/>
<area shape="rect" href="../../d4/d0f/internal_2encoding_8h_source.html" title=" " alt="" coords="2853,802,2997,829"/>
<area shape="rect" href="../../d9/d84/win32_2file_8c_source.html" title=" " alt="" coords="5,884,99,911"/>
<area shape="rect" href="../../d0/dac/internal_2file_8h_source.html" title=" " alt="" coords="853,802,960,829"/>
<area shape="rect" href="../../d2/d38/internal_2string_8h_source.html" title=" " alt="" coords="7891,713,8013,739"/>
<area shape="rect" href="../../d8/d4e/strftime_8c_source.html" title=" " alt="" coords="7833,884,7916,911"/>
<area shape="rect" href="../../d4/db9/internal_2symbol_8h_source.html" title=" " alt="" coords="6045,802,6176,829"/>
<area shape="rect" href="../../dc/d45/internal_2transcode_8h_source.html" title=" " alt="" coords="1703,713,1851,739"/>
<area shape="rect" href="../../dd/d61/miniinit_8c_source.html" title=" " alt="" coords="1297,713,1375,739"/>
<area shape="rect" href="../../d2/dd8/scheduler_8h.html" title="Scheduler APIs." alt="" coords="3174,795,3309,836"/>
<area shape="rect" href="../../d5/d08/buffer_8h.html" title=" " alt="" coords="5163,623,5333,650"/>
<area shape="rect" href="../../d4/da0/include_2ruby_2random_8h.html" title=" " alt="" coords="7048,623,7213,650"/>
<area shape="rect" href="../../db/dde/internal_8h_source.html" title=" " alt="" coords="6216,623,6299,650"/>
<area shape="rect" href="../../d8/d32/vm__core_8h_source.html" title=" " alt="" coords="5921,713,6007,739"/>
<area shape="rect" href="../../d2/d0b/version_8c_source.html" title=" " alt="" coords="9625,802,9703,829"/>
<area shape="rect" href="../../df/d7d/internal_2array_8h_source.html" title=" " alt="" coords="10059,623,10178,650"/>
<area shape="rect" href="../../d3/d22/imemo_8h_source.html" title=" " alt="" coords="10485,713,10616,739"/>
<area shape="rect" href="../../dd/d84/internal_2process_8h_source.html" title=" " alt="" coords="1529,802,1663,829"/>
<area shape="rect" href="../../d3/d98/internal_2bignum_8h_source.html" title=" " alt="" coords="12141,623,12275,650"/>
<area shape="rect" href="../../d8/d5f/internal_2rational_8h_source.html" title=" " alt="" coords="11683,802,11816,829"/>
<area shape="rect" href="../../df/db9/bits_8h_source.html" title=" " alt="" coords="5560,623,5669,650"/>
<area shape="rect" href="../../d4/d38/internal_2time_8h_source.html" title=" " alt="" coords="5264,713,5379,739"/>
<area shape="rect" href="../../d4/d03/compile_8h_source.html" title=" " alt="" coords="4449,802,4583,829"/>
<area shape="rect" href="../../d8/d8c/internal_2cont_8h_source.html" title=" " alt="" coords="9384,802,9499,829"/>
<area shape="rect" href="../../d5/dfa/internal_2dir_8h_source.html" title=" " alt="" coords="728,802,829,829"/>
<area shape="rect" href="../../df/d03/internal_2enum_8h_source.html" title=" " alt="" coords="12752,802,12875,829"/>
<area shape="rect" href="../../d3/d11/internal_2eval_8h_source.html" title=" " alt="" coords="7523,802,7634,829"/>
<area shape="rect" href="../../d9/dbe/internal_2gc_8h_source.html" title=" " alt="" coords="10372,623,10473,650"/>
<area shape="rect" href="../../d2/da3/internal_2struct_8h_source.html" title=" " alt="" coords="8843,802,8965,829"/>
<area shape="rect" href="../../d1/d28/internal_2hash_8h_source.html" title=" " alt="" coords="8990,802,9106,829"/>
<area shape="rect" href="../../d4/d15/internal_2io_8h_source.html" title=" " alt="" coords="2731,802,2829,829"/>
<area shape="rect" href="../../dd/d9a/internal_2load_8h_source.html" title=" " alt="" coords="1137,802,1250,829"/>
<area shape="rect" href="../../df/db1/math_8h_source.html" title=" " alt="" coords="10235,802,10354,829"/>
<area shape="rect" href="../../d3/d1c/internal_2parse_8h_source.html" title=" " alt="" coords="2067,802,2189,829"/>
<area shape="rect" href="../../d3/d0b/internal_2proc_8h_source.html" title=" " alt="" coords="11240,802,11355,829"/>
<area shape="rect" href="../../d0/d9b/internal_2re_8h_source.html" title=" " alt="" coords="6654,802,6754,829"/>
<area shape="rect" href="../../d0/ddd/sanitizers_8h_source.html" title=" " alt="" coords="8521,802,8666,829"/>
<area shape="rect" href="../../dc/d8f/internal_2vm_8h_source.html" title=" " alt="" coords="6323,623,6429,650"/>
<area shape="rect" href="../../d5/d74/loadpath_8c_source.html" title=" " alt="" coords="7238,623,7325,650"/>
<area shape="rect" href="../../d1/d9b/flock_8c_source.html" title=" " alt="" coords="7349,623,7461,650"/>
<area shape="rect" href="../../d6/d27/probes__helper_8h_source.html" title=" " alt="" coords="5606,713,5727,739"/>
<area shape="rect" href="../../da/d10/timev_8h_source.html" title=" " alt="" coords="8088,713,8155,739"/>
<area shape="rect" href="../../d1/daa/transcode__data_8h_source.html" title=" " alt="" coords="7485,623,7613,650"/>
<area shape="rect" href="../../d5/d8c/vm__debug_8h_source.html" title=" " alt="" coords="6743,713,6841,739"/>
<area shape="rect" href="../../d9/d0c/class_8c_source.html" title=" " alt="" coords="10615,884,10675,911"/>
<area shape="rect" href="../../d8/d16/gc_8c_source.html" title=" " alt="" coords="8953,884,8999,911"/>
<area shape="rect" href="../../d0/de1/object_8c_source.html" title=" " alt="" coords="8194,884,8265,911"/>
<area shape="rect" href="../../d0/d2a/variable_8c_source.html" title=" " alt="" coords="7154,884,7235,911"/>
<area shape="rect" href="../../d1/dcc/bignum_8c_source.html" title=" " alt="" coords="10255,884,10334,911"/>
<area shape="rect" href="../../d2/d47/compile_8c_source.html" title=" " alt="" coords="6527,884,6607,911"/>
<area shape="rect" href="../../db/dcc/error_8c_source.html" title=" " alt="" coords="5251,884,5314,911"/>
<area shape="rect" href="../../dd/d74/iseq_8c_source.html" title=" " alt="" coords="4487,884,4545,911"/>
<area shape="rect" href="../../d0/d78/memory__view_8c_source.html" title=" " alt="" coords="7011,884,7130,911"/>
<area shape="rect" href="../../d6/d27/numeric_8c_source.html" title=" " alt="" coords="11553,884,11636,911"/>
<area shape="rect" href="../../dc/dcc/array_8c_source.html" title=" " alt="" coords="12329,884,12391,911"/>
<area shape="rect" href="../../d1/d04/hash_8c_source.html" title=" " alt="" coords="9659,884,9720,911"/>
<area shape="rect" href="../../de/de9/vm_8c_source.html" title=" " alt="" coords="5867,884,5917,911"/>
<area shape="rect" href="../../de/d87/symbol_8c_source.html" title=" " alt="" coords="6123,884,6199,911"/>
<area shape="rect" href="../../d5/db5/encoding_8c_source.html" title=" " alt="" coords="2270,884,2359,911"/>
<area shape="rect" href="../../d9/d69/enum_8c_source.html" title=" " alt="" coords="11337,884,11405,911"/>
<area shape="rect" href="../../d8/d01/ast_8c_source.html" title=" " alt="" coords="2473,884,2524,911"/>
<area shape="rect" href="../../d7/d5b/setproctitle_8c_source.html" title=" " alt="" coords="2847,884,3001,911"/>
<area shape="rect" href="../../d5/dc4/core_8h.html" title="Core data structures, definitions and manipulations." alt="" coords="4483,437,4637,479"/>
<area shape="rect" href="../../dc/d92/rtypeddata_8h.html" title="Defines struct RTypedData." alt="" coords="4541,348,4694,389"/>
<area shape="rect" href="../../d9/de1/rarray_8h.html" title="Defines struct RArray." alt="" coords="4261,348,4414,389"/>
<area shape="rect" href="../../d9/d69/robject_8h.html" title="Defines struct RObject." alt="" coords="4375,259,4529,300"/>
<area shape="rect" href="../../d8/dcf/rstring_8h.html" title="Defines struct RString." alt="" coords="4553,259,4706,300"/>
<area shape="rect" href="../../df/d43/coderange_8h.html" title="Routines for code ranges." alt="" coords="3237,527,3403,568"/>
<area shape="rect" href="../../df/d1f/include_2ruby_2internal_2encoding_2encoding_8h.html" title="Defines rb_encoding." alt="" coords="3841,437,3999,479"/>
<area shape="rect" href="../../d5/d87/globals_8h.html" title="Ruby&#45;level global variables / constants, visible from C." alt="" coords="4177,437,4330,479"/>
<area shape="rect" href="../../de/d3d/include_2ruby_2internal_2intern_2error_8h.html" title="Public APIs related to rb_eException." alt="" coords="10742,259,10895,300"/>
<area shape="rect" href="../../d6/dc6/newobj_8h.html" title="Defines NEWOBJ." alt="" coords="4146,259,4299,300"/>
<area shape="rect" href="../../d8/d4f/include_2ruby_2ractor_8h.html" title=" " alt="" coords="4013,713,4163,739"/>
<area shape="rect" href="../../db/d6e/cxxanyargs_8hpp.html" title="Provides old prototypes for C++ programs." alt="" coords="10503,437,10665,479"/>
<area shape="rect" href="../../de/dbc/st__data__t_8h.html" title="Arithmetic conversion between C&#39;s st_data_t and Ruby&#39;s." alt="" coords="10153,348,10316,389"/>
<area shape="rect" href="../../d4/d04/include_2ruby_2internal_2intern_2hash_8h.html" title="Public APIs related to rb_cHash." alt="" coords="10503,348,10657,389"/>
<area shape="rect" href="../../d8/d68/include_2ruby_2internal_2intern_2string_8h.html" title="Public APIs related to rb_cString." alt="" coords="10910,348,11063,389"/>
<area shape="rect" href="../../db/d63/include_2ruby_2internal_2intern_2variable_8h.html" title="Public APIs related to names inside of a Ruby program." alt="" coords="10681,348,10834,389"/>
<area shape="rect" href="../../d6/d87/regint_8h_source.html" title=" " alt="" coords="12505,534,12575,561"/>
<area shape="rect" href="../../d6/dda/regparse_8c_source.html" title=" " alt="" coords="10340,355,10428,382"/>
</map>
</div>
</div>
<p><a href="../../d8/de3/xmalloc_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a68807579df42da3adebb1595a2828e13"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de3/xmalloc_8h.html#a68807579df42da3adebb1595a2828e13">USE_GC_MALLOC_OBJ_INFO_DETAILS</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a68807579df42da3adebb1595a2828e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6af5faec3f9662b20ffc9903f923dec0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>&#160;&#160;&#160;<a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c">ruby_xmalloc</a></td></tr>
<tr class="memdesc:ga6af5faec3f9662b20ffc9903f923dec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c">ruby_xmalloc</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga6af5faec3f9662b20ffc9903f923dec0">More...</a><br /></td></tr>
<tr class="separator:ga6af5faec3f9662b20ffc9903f923dec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ac2f2c34526acafe1be29e865c60922"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga8ac2f2c34526acafe1be29e865c60922">xmalloc2</a>&#160;&#160;&#160;<a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3">ruby_xmalloc2</a></td></tr>
<tr class="memdesc:ga8ac2f2c34526acafe1be29e865c60922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3">ruby_xmalloc2</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga8ac2f2c34526acafe1be29e865c60922">More...</a><br /></td></tr>
<tr class="separator:ga8ac2f2c34526acafe1be29e865c60922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gade8988c3fcdbca51eb623eb5f7ad5150"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#gade8988c3fcdbca51eb623eb5f7ad5150">xcalloc</a>&#160;&#160;&#160;<a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0">ruby_xcalloc</a></td></tr>
<tr class="memdesc:gade8988c3fcdbca51eb623eb5f7ad5150"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0">ruby_xcalloc</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#gade8988c3fcdbca51eb623eb5f7ad5150">More...</a><br /></td></tr>
<tr class="separator:gade8988c3fcdbca51eb623eb5f7ad5150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40740062faf2d95d4935112447c464ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga40740062faf2d95d4935112447c464ef">xrealloc</a>&#160;&#160;&#160;<a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2">ruby_xrealloc</a></td></tr>
<tr class="memdesc:ga40740062faf2d95d4935112447c464ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2">ruby_xrealloc</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga40740062faf2d95d4935112447c464ef">More...</a><br /></td></tr>
<tr class="separator:ga40740062faf2d95d4935112447c464ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f21649774a7fb04c28cf84169df8fd2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga5f21649774a7fb04c28cf84169df8fd2">xrealloc2</a>&#160;&#160;&#160;<a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd">ruby_xrealloc2</a></td></tr>
<tr class="memdesc:ga5f21649774a7fb04c28cf84169df8fd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd">ruby_xrealloc2</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga5f21649774a7fb04c28cf84169df8fd2">More...</a><br /></td></tr>
<tr class="separator:ga5f21649774a7fb04c28cf84169df8fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c3897f7c46ca54a2e0dd7b24a40c7cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dd3/group__deprecated__macros.html#ga2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>&#160;&#160;&#160;<a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e">ruby_xfree</a></td></tr>
<tr class="memdesc:ga2c3897f7c46ca54a2e0dd7b24a40c7cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Old name of <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e">ruby_xfree</a>.  <a href="../../dd/dd3/group__deprecated__macros.html#ga2c3897f7c46ca54a2e0dd7b24a40c7cb">More...</a><br /></td></tr>
<tr class="separator:ga2c3897f7c46ca54a2e0dd7b24a40c7cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa3b4330a47b221ee106833fdffeffe7c"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c">ruby_xmalloc</a> (size_t size)</td></tr>
<tr class="memdesc:aa3b4330a47b221ee106833fdffeffe7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a storage instance.  <a href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c">More...</a><br /></td></tr>
<tr class="separator:aa3b4330a47b221ee106833fdffeffe7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38af2ffe6fb6c0aa7c1515b8108ecb3"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3">ruby_xmalloc2</a> (size_t nelems, size_t elemsiz)</td></tr>
<tr class="memdesc:aa38af2ffe6fb6c0aa7c1515b8108ecb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>, except it allocates <code>nelems</code> * <code>elemsiz</code> bytes.  <a href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3">More...</a><br /></td></tr>
<tr class="separator:aa38af2ffe6fb6c0aa7c1515b8108ecb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43a2548ba5a2daaacbc12bb2cba6ed0"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0">ruby_xcalloc</a> (size_t nelems, size_t elemsiz)</td></tr>
<tr class="memdesc:aa43a2548ba5a2daaacbc12bb2cba6ed0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3" title="Identical to ruby_xmalloc(), except it allocates nelems * elemsiz bytes.">ruby_xmalloc2()</a>, except it returns a zero-filled storage instance.  <a href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0">More...</a><br /></td></tr>
<tr class="separator:aa43a2548ba5a2daaacbc12bb2cba6ed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02daf2c7e5ebb15c8dfe8365fa7c31d2"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2">ruby_xrealloc</a> (void *ptr, size_t newsiz)</td></tr>
<tr class="memdesc:a02daf2c7e5ebb15c8dfe8365fa7c31d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resize the storage instance.  <a href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2">More...</a><br /></td></tr>
<tr class="separator:a02daf2c7e5ebb15c8dfe8365fa7c31d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31bce15ac8213e4b72d77574f4ebdadd"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd">ruby_xrealloc2</a> (void *ptr, size_t newelems, size_t newsiz)</td></tr>
<tr class="memdesc:a31bce15ac8213e4b72d77574f4ebdadd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identical to <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, except it resizes the given storage instance to <code>newelems</code> * <code>newsiz</code> bytes.  <a href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd">More...</a><br /></td></tr>
<tr class="separator:a31bce15ac8213e4b72d77574f4ebdadd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7196f140bd2dd83bc786d06ce283cd0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e">ruby_xfree</a> (void *ptr)</td></tr>
<tr class="memdesc:a7196f140bd2dd83bc786d06ce283cd0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocates a storage instance.  <a href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e">More...</a><br /></td></tr>
<tr class="separator:a7196f140bd2dd83bc786d06ce283cd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Declares <a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>. </p>
<dl class="section author"><dt>Author</dt><dd>Ruby developers <a href="#" onclick="location.href='mai'+'lto:'+'rub'+'y-'+'cor'+'e@'+'rub'+'y-'+'lan'+'g.'+'org'; return false;">ruby-<span class="obfuscator">.nosp@m.</span>core<span class="obfuscator">.nosp@m.</span>@ruby<span class="obfuscator">.nosp@m.</span>-lan<span class="obfuscator">.nosp@m.</span>g.org</a> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>This file is a part of the programming language Ruby. Permission is hereby granted, to either redistribute and/or modify this file, provided that the conditions mentioned in the file COPYING are met. Consult the file for details. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Symbols prefixed with either <code>RBIMPL</code> or <code>rbimpl</code> are implementation details. Don't take them as canon. They could rapidly appear then vanish. The name (path) of this header file is also an implementation detail. Do not expect it to persist at the place it is now. Developers are free to move it anywhere anytime at will. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>To ruby-core: remember that this header can be possibly recursively included from extension libraries written in C++. Do not expect for instance <code>__VA_ARGS__</code> is always available. We assume C99 for ruby itself but we don't assume languages of extension libraries. They could be written in C++98. </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d8/de3/xmalloc_8h_source.html">xmalloc.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a68807579df42da3adebb1595a2828e13" name="a68807579df42da3adebb1595a2828e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68807579df42da3adebb1595a2828e13">&#9670;&nbsp;</a></span>USE_GC_MALLOC_OBJ_INFO_DETAILS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_GC_MALLOC_OBJ_INFO_DETAILS&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section warning"><dt>Warning</dt><dd>Do not touch this macro. </dd>
<dd>
It is an implementation detail. </dd>
<dd>
It was a failure at the first place to let you know about it. </dd>
<dd>
The value of this macro must match for ruby itself and all extension libraries, otherwise serious memory corruption shall occur. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/de3/xmalloc_8h_source.html#l00050">50</a> of file <a class="el" href="../../d8/de3/xmalloc_8h_source.html">xmalloc.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa43a2548ba5a2daaacbc12bb2cba6ed0" name="aa43a2548ba5a2daaacbc12bb2cba6ed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa43a2548ba5a2daaacbc12bb2cba6ed0">&#9670;&nbsp;</a></span>ruby_xcalloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * ruby_xcalloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nelems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>elemsiz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3" title="Identical to ruby_xmalloc(), except it allocates nelems * elemsiz bytes.">ruby_xmalloc2()</a>, except it returns a zero-filled storage instance. </p>
<p >It can also be seen as a routine identical to <a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>, except it calls calloc() instead of malloc().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nelems</td><td>Number of elements. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elemsiz</td><td>Size of an element. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
    <tr><td class="paramname">rb_eArgError</td><td>`nelems` * `elemsiz` would overflow. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid pointer to an allocated storage instance; which has at least <code>nelems</code> * <code>elemsiz</code> bytes width, with appropriate alignment detected by the underlying calloc() routine. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The returned storage instance is filled with zeros. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL. </dd>
<dd>
Unlike some calloc() implementations, it allocates something and returns a meaningful value even when <code>nelems</code> or <code>elemsiz</code> or both are zero. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d16/gc_8c_source.html#l14181">14181</a> of file <a class="el" href="../../d8/d16/gc_8c_source.html">gc.c</a>.</p>

</div>
</div>
<a id="a7196f140bd2dd83bc786d06ce283cd0e" name="a7196f140bd2dd83bc786d06ce283cd0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7196f140bd2dd83bc786d06ce283cd0e">&#9670;&nbsp;</a></span>ruby_xfree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ruby_xfree </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocates a storage instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ptr</td><td>Either<ul>
<li>NULL, or</li>
<li>a valid pointer previously returned from one of:<ul>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3" title="Identical to ruby_xmalloc(), except it allocates nelems * elemsiz bytes.">ruby_xmalloc2()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0" title="Identical to ruby_xmalloc2(), except it returns a zero-filled storage instance.">ruby_xcalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. </li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>The passed pointer must point to a valid live storage instance. It is a failure to pass an already freed pointer. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The storage instance pointed by the passed pointer gets invalidated; it is no longer addressable. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Every single storage instance that was previously allocated by either <a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3" title="Identical to ruby_xmalloc(), except it allocates nelems * elemsiz bytes.">ruby_xmalloc2()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0" title="Identical to ruby_xmalloc2(), except it returns a zero-filled storage instance.">ruby_xcalloc()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a> shall be invalidated exactly once by either passing it to <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, or passing it to either <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a> then check the return value for invalidation. </dd>
<dd>
Do not pass anything other than pointers described above. For instance pointers returned from malloc() or mmap() shall not be passed to this function, because the underlying memory management mechanism could differ. </dd>
<dd>
Do not pass any invalid pointers to this function e.g. by calling it twice with a same argument. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d16/gc_8c_source.html#l12226">12226</a> of file <a class="el" href="../../d8/d16/gc_8c_source.html">gc.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d2a/variable_8c_source.html#l02953">rb_const_remove()</a>.</p>

</div>
</div>
<a id="aa3b4330a47b221ee106833fdffeffe7c" name="aa3b4330a47b221ee106833fdffeffe7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3b4330a47b221ee106833fdffeffe7c">&#9670;&nbsp;</a></span>ruby_xmalloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * ruby_xmalloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a storage instance. </p>
<p >It is largely the same as system malloc(), except:</p>
<ul>
<li>It raises Ruby exceptions instead of returning NULL, and</li>
<li>In case of <code>ENOMEM</code> it tries to GC to make some room.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Requested amount of memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for `size` bytes allocation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid pointer to an allocated storage instance; which has at least <code>size</code> bytes width, with appropriate alignment detected by the underlying malloc() routine. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL. </dd>
<dd>
Unlike some malloc() implementations, it allocates something and returns a meaningful value even when <code>size</code> is equal to zero. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d16/gc_8c_source.html#l14161">14161</a> of file <a class="el" href="../../d8/d16/gc_8c_source.html">gc.c</a>.</p>

</div>
</div>
<a id="aa38af2ffe6fb6c0aa7c1515b8108ecb3" name="aa38af2ffe6fb6c0aa7c1515b8108ecb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa38af2ffe6fb6c0aa7c1515b8108ecb3">&#9670;&nbsp;</a></span>ruby_xmalloc2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * ruby_xmalloc2 </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nelems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>elemsiz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>, except it allocates <code>nelems</code> * <code>elemsiz</code> bytes. </p>
<p >This is needed because the multiplication could integer overflow. On such situations Ruby does not try to allocate at all but raises Ruby level exceptions instead. If there is no integer overflow the behaviour is exactly the same as <code>ruby_xmalloc(nelems*elemsiz)</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nelems</td><td>Number of elements. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">elemsiz</td><td>Size of an element. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
    <tr><td class="paramname">rb_eArgError</td><td>`nelems` * `elemsiz` would overflow. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid pointer to an allocated storage instance; which has at least <code>nelems</code> * <code>elemsiz</code> bytes width, with appropriate alignment detected by the underlying malloc() routine. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL. </dd>
<dd>
Unlike some malloc() implementations, it allocates something and returns a meaningful value even when <code>nelems</code> or <code>elemsiz</code> or both are zero. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d16/gc_8c_source.html#l14171">14171</a> of file <a class="el" href="../../d8/d16/gc_8c_source.html">gc.c</a>.</p>

</div>
</div>
<a id="a02daf2c7e5ebb15c8dfe8365fa7c31d2" name="a02daf2c7e5ebb15c8dfe8365fa7c31d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02daf2c7e5ebb15c8dfe8365fa7c31d2">&#9670;&nbsp;</a></span>ruby_xrealloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * ruby_xrealloc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>newsiz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resize the storage instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>A valid pointer to a storage instance that was previously returned from either:<ul>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3" title="Identical to ruby_xmalloc(), except it allocates nelems * elemsiz bytes.">ruby_xmalloc2()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0" title="Identical to ruby_xmalloc2(), except it returns a zero-filled storage instance.">ruby_xcalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">newsiz</td><td>Requested new amount of memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for `newsiz` bytes allocation. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid pointer to a (possibly newly allocated) storage instance; which has at least <code>newsiz</code> bytes width, with appropriate alignment detected by the underlying realloc() routine. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The passed pointer must point to a valid live storage instance. It is a failure to pass an already freed pointer. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>In case the function returns the passed pointer as-is, the storage instance that the pointer holds is either grown or shrunken to have at least <code>newsiz</code> bytes. Otherwise a valid pointer to a newly allocated storage instance is returned. In this case <code>ptr</code> is invalidated as if it was passed to <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Unlike some realloc() implementations, passing zero to <code>newsiz</code> is not the same as calling <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, because this function never returns NULL. Something meaningful still returns then. </dd>
<dd>
It is a failure not to check the return value. Do not assume anything on it. It could be either identical to, or distinct form the passed argument. </dd>
<dd>
Do not assume anything on the alignment of the return value. There is no guarantee that it inherits the passed argument's one. </dd>
<dd>
The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d16/gc_8c_source.html#l14191">14191</a> of file <a class="el" href="../../d8/d16/gc_8c_source.html">gc.c</a>.</p>

</div>
</div>
<a id="a31bce15ac8213e4b72d77574f4ebdadd" name="a31bce15ac8213e4b72d77574f4ebdadd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31bce15ac8213e4b72d77574f4ebdadd">&#9670;&nbsp;</a></span>ruby_xrealloc2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * ruby_xrealloc2 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>newelems</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>newsiz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identical to <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, except it resizes the given storage instance to <code>newelems</code> * <code>newsiz</code> bytes. </p>
<p >This is needed because the multiplication could integer overflow. On such situations Ruby does not try to touch the contents of argument pointer at all but raises Ruby level exceptions instead. If there is no integer overflow the behaviour is exactly the same as <code>ruby_xrealloc(ptr,nelems*elemsiz)</code>.</p>
<p >This is roughly the same as reallocarray() function that OpenBSD etc. provides, but also interacts with our GC.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>A valid pointer to a storage instance that was previously returned from either:<ul>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa3b4330a47b221ee106833fdffeffe7c" title="Allocates a storage instance.">ruby_xmalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa38af2ffe6fb6c0aa7c1515b8108ecb3" title="Identical to ruby_xmalloc(), except it allocates nelems * elemsiz bytes.">ruby_xmalloc2()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#aa43a2548ba5a2daaacbc12bb2cba6ed0" title="Identical to ruby_xmalloc2(), except it returns a zero-filled storage instance.">ruby_xcalloc()</a>,</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or</li>
<li><a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">newelems</td><td>Requested new number of elements. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">newsiz</td><td>Requested new size of each element. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">rb_eNoMemError</td><td>No space left for allocation. </td></tr>
    <tr><td class="paramname">rb_eArgError</td><td>`newelems` * `newsiz` would overflow. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A valid pointer to a (possibly newly allocated) storage instance; which has at least <code>newelems</code> * <code>newsiz</code> bytes width, with appropriate alignment detected by the underlying realloc() routine. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The passed pointer must point to a valid live storage instance. It is a failure to pass an already freed pointer. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>In case the function returns the passed pointer as-is, the storage instance that the pointer holds is either grown or shrunken to have at least <code>newelems</code> * <code>newsiz</code> bytes. Otherwise a valid pointer to a newly allocated storage instance is returned. In this case <code>ptr</code> is invalidated as if it was passed to <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>It doesn't return NULL. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Unlike some realloc() implementations, passing zero to either <code>newelems</code> or <code>elemsiz</code> are not the same as calling <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, because this function never returns NULL. Something meaningful still returns then. </dd>
<dd>
It is a failure not to check the return value. Do not assume anything on it. It could be either identical to, or distinct form the passed argument. </dd>
<dd>
Do not assume anything on the alignment of the return value. There is no guarantee that it inherits the passed argument's one. </dd>
<dd>
The return value shall be invalidated exactly once by either <a class="el" href="../../d8/de3/xmalloc_8h.html#a7196f140bd2dd83bc786d06ce283cd0e" title="Deallocates a storage instance.">ruby_xfree()</a>, <a class="el" href="../../d8/de3/xmalloc_8h.html#a02daf2c7e5ebb15c8dfe8365fa7c31d2" title="Resize the storage instance.">ruby_xrealloc()</a>, or <a class="el" href="../../d8/de3/xmalloc_8h.html#a31bce15ac8213e4b72d77574f4ebdadd" title="Identical to ruby_xrealloc(), except it resizes the given storage instance to newelems * newsiz bytes...">ruby_xrealloc2()</a>. It is a failure to pass it to system free(), because the system and Ruby might or might not share the same malloc() implementation. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d16/gc_8c_source.html#l14201">14201</a> of file <a class="el" href="../../d8/d16/gc_8c_source.html">gc.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
